// SPDX-License-Identifier: GPL-2.0-only
/*
 * Copyright (c) 2023-2023 XRing Technologies Co., Ltd.
 *
 * This software is licensed under the terms of the GNU General Public
 * License version 2, as published by the Free Software Foundation, and
 * may be copied, distributed, and modified under those terms.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU General Public License for more details.
 */

#include "dpu_osal.h"
#include "dsi_hw_phy.h"
#include "dsi_hw_phy_ops.h"
#include "dsi_phy_1v2_3t4l_reg.h"


#define LP_FREQ                (15)
#define PHY_INPUT_FREQ  (100000000UL)
#define PHY_INPUT_DIV_N (4)


static struct phy_pll_static phy_pll_static = {
	0, 1, 1, 0, 1, 0, 16, 3, 0, 1, 255, 3, 1, 5, 0, 0, 1, 1, 0,
	0, 1, 1, 1, 0, 1, 0
};

static struct freq_range_params freq_range[] = {
	/* freq   vco   cpibas P*/
	{  38000, 0x02, 0x50, 32, 0x1}, /* 00: 00-0010: Vco range 62.5 ~ 40 */
	{  40000, 0x01, 0x50, 32, 0x1}, /* 00: 00-0001: Vco range 62.5 ~ 40 */
	{  44000, 0x01, 0x50, 32, 0x1}, /* 01: 00-0001 */
	{  57000, 0x03, 0x50, 32, 0x1}, /* 02: 00-0011 */
	{  62500, 0x32, 0x10, 16, 0x1}, /* 04: 11-0010 Vco range 125 ~ 62.5 */
	{  68000, 0x32, 0x10, 16, 0x1}, /* 03: 11-0010 */
	{  89000, 0x31, 0x10, 16, 0x1}, /* 04: 11-0001 Vco range 125 ~ 62.5 */
	{ 118000, 0x33, 0x10, 16, 0x1}, /* 05: 11-0011 */
	{ 125000, 0x22, 0x10,  8, 0x1}, /* 06: 10-0010 */
	{ 136000, 0x22, 0x10,  8, 0x1}, /* 06: 10-0010 */
	{ 178000, 0x21, 0x10,  8, 0x1}, /* 07: 10-0001 */
	{ 237000, 0x23, 0x10,  8, 0x1}, /* 08: 10-0011 */
	{ 250000, 0x12, 0x10,  4, 0x1}, /* 09: 01-0010: Vco range 250 ~ 125 */
	{ 273000, 0x12, 0x10,  4, 0x1}, /* 09: 01-0010 */
	{ 356000, 0x11, 0x10,  4, 0x1}, /* 10: 01-0001 */
	{ 475000, 0x13, 0x10,  4, 0x1}, /* 12: 01-0011 */
	{ 500000, 0x32, 0x50,  2, 0x1}, /* 13: 11-0010 */
	{ 546000, 0x32, 0x50,  2, 0x1}, /* 13: 11-0010 */
	{ 712000, 0x31, 0x50,  2, 0x1}, /* 14: 11-0001 */
	{ 950000, 0x33, 0x50,  2, 0x1}, /* 15: 11-0011: Vco range 5000 ~ 250 */
	{1000000, 0x13, 0x10,  1, 0x1}, /* 16: 00-0010 */
	{1092000, 0x02, 0x10,  1, 0x1}, /* 16: 00-0010 */
	{1435000, 0x01, 0x10,  1, 0x1}, /* 17: 00-0001 */
	{2100000, 0x00, 0x10,  1, 0x1}, /* 18: 00-0000 */
	{2250000, 0x00, 0x10,  1, 0x1}, /* 29: 00-0000 */
};


static u32 __maybe_unused phy_clock_ui_cal(u64 rate)
{
	u32 clock_period;

	/* unit: ns, round up */
	clock_period =  DIV_ROUND_UP(1000000000, rate);

	return clock_period;
}

static void phy_calculate_fpga(u64 lanerate, u8 phy_type, struct timing *tm)
{
	u32 d2a_hs_tx_dly;
	u32 tmp = 0;

	d2a_hs_tx_dly = (phy_type == DSI_PHY_TYPE_DPHY) ?
		D2A_HS_TX_DELAY_DPHY : D2A_HS_TX_DELAY_CPHY;
	tm->ui = 100000000 / (lanerate / 1000);

	/**
	 * normal 200MHz
	 * tm->t_dco = 500;
	 * tm->t_dco_min = 526;
	 */
	/* Max 209MHz */
	//tm->t_dco_max = T_DCO_MAX;

	//tm->clk_prepare_zero_min = 300;
	tm->hs_prepare_zero = 14500 + 10 * tm->ui;
	if(phy_type == DSI_PHY_TYPE_CPHY)
		tm->t_word_clk = tm->ui * 7;
	else
		tm->t_word_clk = tm->ui * 8;

	tm->hs_exit = 110 * 100; // 100 * MULT / 10 = 110;
	tm->hs_exit_reg = DIV_ROUND_UP(tm->hs_exit, T_DCO_MAX) - 1;

	tm->clk_pre_reg = D2A_HS_TX_DELAY_DPHY;

	/* int(38 + (95 - 38) / 2) 66.5 */
	tm->clk_prepare = 66 * 100;

	/* int((300 - clk_prepare * mult)) */
	tm->clk_zero = 227 * 100;

	/* 40+4 * tm->ui + (((85 + 6 * tm->ui)-(40 + 4 * tm->ui)) / 2) */
	tmp = (8500 + 6 * tm->ui)-(4000 + 4 * tm->ui);
	tm->hs_prepare_dco = 4000 + 4 * tm->ui + tmp / 2;

	tmp = (tm->hs_prepare_dco * 100) + LPTX_IO_SR0_FAIL_DELAY;

	tm->t_eot = 105 *100 + 12 * tm->ui;

	tm->t_hs_trail = ((8 * tm->ui) > (6000 + 4 * tm->ui)) ?
		(8 * tm->ui) : (6000 + 4 * tm->ui);
	tm->hs_trail = tm->t_hs_trail + (tm->t_eot - tm->t_hs_trail) / 2;

	tmp = (tm->hs_trail_reg + 1) * tm->t_word_clk -
		tm->t_word_clk - 4 * T_DCO_MAX;
	//tm->hs_trai_dco_reg = (tmp / T_DCO_MAX) - 1;

	tm->hs_zero = (14500 + 10 * tm->ui) - tm->hs_prepare_dco;

	tm->clk_prepare_reg = 24;
	tm->clk_trail = 60*100 + (105*100 + 12 * tm->ui - 60*100) / 2;
	tm->clk_post = (60*100 + 52 * tm->ui) * MULT / 10;

	/*
	 * t3_prepare_min = 38, t3_prepare_max = 95
	 * t3_prepare = (MIN + MAX-MIN) /2
	 * t3_prepare = int(38.0 + (95.0 - 38.0) / 2) = int(66.5)
	 */
	tm->t3_prepare = 66 * 100;
	tm->t3_prepare_dco = 66 * 100;

	/*
	 * t3_prebegin_min = 7 * UI, t3_prebegin_max = 448 * UI
	 * t3_prebegin = (MIN + MAX-MIN) / 2 * UI
	 * t3_prebegin = int((7.0 + ((448.0 - 7.0) / 2)) * UI)
	 */
	tm->t3_prebegin = (7 + ((448 - 7) / 2)) * tm->ui;
	/*
	 * t3_calpremble_min = 7 * UI, t3_calpremble_max = 256 * 7 * UI
	 * t3_calpremble = (MIN + MAX-MIN) /2
	 * t3_calpremble_dco = int(38.0 + (95.0 - 38.0) / 2)
	 */
	tm->t3_calpremble = (7 + ((256 * 7) - 7) / 2) * tm->ui;

	/*
	 * t3_post_min = 7 * UI, t3_post_max = 224 * UI + D2A_HSTX_DLY
	 * t3_post = (MIN + MAX-MIN) /2
	 * t3_post_dco = int(38.0 + (95.0 - 38.0) / 2)
	 */
	tm->t3_post = (7 + (224 - 7) / 2) * tm->ui;

	DSI_DEBUG("ui %d\n",tm->ui);
	DSI_DEBUG("hs_exit_reg %d\n",tm->hs_exit_reg);
	DSI_DEBUG("hs_prepare_zero %d\n",tm->hs_prepare_zero);
	DSI_DEBUG("t_word_clk %d\n",tm->t_word_clk);
	DSI_DEBUG("t_eot %d\n",tm->t_eot);
	DSI_DEBUG("t_hs_trail %d\n",tm->t_hs_trail);
	DSI_DEBUG("hs_prepare_dco %d\n",tm->hs_prepare_dco);
	DSI_DEBUG("clk_prepare %d\n",tm->clk_prepare);
	DSI_DEBUG("clk_zero %d\n",tm->clk_zero);
	DSI_DEBUG("hs_zero %d\n",tm->hs_zero);
	DSI_DEBUG("clk_trail %d\n",tm->clk_trail);
	DSI_DEBUG("hs_trail %d\n",tm->hs_trail);
	DSI_DEBUG("hs_trail_reg %d\n",tm->hs_trail_reg);
	DSI_DEBUG("clk_post %d\n",tm->clk_post);
	DSI_DEBUG("t3_prepare_dco %d\n",tm->t3_prepare_dco);
	DSI_DEBUG("t3_prebegin %d\n",tm->t3_prebegin);
	DSI_DEBUG("t3_calpremble %d\n",tm->t3_calpremble);
	DSI_DEBUG("t3_post %d\n",tm->t3_post);

}

static void phy_parameter_fpga(u64 lanerate, u8 phy_type, struct phy_cfg *phy)
{
	u32 tlptxoverlap, tlpt11init_dco, tlp11end_dco;
	u32 tlpx_dco, thsexit_dco;
	struct timing tm = {0};
	u32 tmp = 0;

	phy_calculate_fpga(lanerate, phy_type, &tm);

	/**
	 * T_DCO_MAX = 4.77 ns, for 209.64 MHz
	 * tlptxoverlap_reg: LPTX_EN_DELAY / T_DCO_MAX
	 * 5 / 4.77 = 1.048, round_up : 2
	 */
	tlptxoverlap =	DIV_ROUND_UP((LPTX_EN_DELAY * 100), T_DCO_MAX);

	/**
	 * hx_tx_10_tlpt11init_dco = 5 * T_ESC / T_DCO - 1
	 * hs_tx_6_tlp11end_dco = 5 * T_ESC / T_DCO - 1
	 * (5 * 1000000) / (LP_FREQ * 1000) = 250
	 * LP_FREQ: = 15, for FPGA test
	 * hx_tx_10_tlpt11init_dco = 69
	 */
	tmp = (5 * 1000000) / (LP_FREQ * 1000) * 100;
	tlpt11init_dco = DIV_ROUND_UP(tmp, T_DCO_MAX) - 1;
	tlp11end_dco = DIV_ROUND_UP(tmp, T_DCO_MAX) - 1;

	/**
	 * hs_tx_4_tlpx_dco = (T_LPX / LPDCO clock period) - 1
	 * T_LPX = 50 * mult = 50 * 1.1 = 55
	 */
	tlpx_dco = DIV_ROUND_UP(T_LPX * 100, T_DCO_MAX) - 1;
	/* (5 * T_ESC / T_DCO) - 1, (T_HS-EXIT / LPDCO clock period) - 1 */
	thsexit_dco = DIV_ROUND_UP(tm.hs_exit, T_DCO_MAX) - 1;

	/************ DPHY ****************************************************/

	phy->hs_tx_3_tlptxoverlap = tlptxoverlap;
	phy->hs_tx_10_tlpt11init_dco = tlpt11init_dco;
	phy->hs_tx_6_tlp11end_dco = tlp11end_dco;
	phy->hs_tx_4_tlpx_dco = tlpx_dco;
	phy->hs_tx_12_thsexit_dco = thsexit_dco;
	/**
	 * ((LPTX_IO_SR0_FAIL_DELAY + T_CLK/HS_PREPARE) / LPDCO clock period)
	 * - 1
	 */
	tmp = LPTX_IO_SR0_FAIL_DELAY + tm.hs_prepare_dco;
	phy->hs_tx_9_thsprpr_dco_d = DIV_ROUND_UP(tmp, T_DCO_MAX) - 1;

	tmp = LPTX_IO_SR0_FAIL_DELAY + tm.clk_prepare;
	phy->hs_tx_9_thsprpr_dco_c = DIV_ROUND_UP(tmp, T_DCO_MAX) - 1;

	/**
	 * ((T_LPX + T_CLK/HS-PREPARE + T_CLK/HS-ZERO +
	 * 5 * LPDCO clock period - 3 * word clock period) /
	 * word clock period) - 1
	 */
	tmp = T_LPX * 100  + tm.hs_prepare_dco + tm.hs_zero + 5 * T_DCO_MAX -
		3 * tm.t_word_clk;
	phy->hs_tx_1_thszero_d = DIV_ROUND_UP(tmp, tm.t_word_clk) - 1;

	tmp = T_LPX * 100 + tm.clk_prepare + tm.clk_zero + 5 * T_DCO_MAX -
		3 * tm.t_word_clk;
	phy->hs_tx_1_thszero_c = DIV_ROUND_UP(tmp, tm.t_word_clk) - 1;

	/* CDPHY board is static */
	phy->hs_tx_2_tclkpre = 3;
	/* (T_CLK/HS-TRAIL / word clock period) - 1 + D2A_HS_TX delay */
	phy->hs_tx_0_thstrail_d = DIV_ROUND_UP(tm.hs_trail, tm.t_word_clk) -
		1 + D2A_HS_TX_DELAY_DPHY;
	phy->hs_tx_0_thstrail_c = DIV_ROUND_UP(tm.clk_trail, tm.t_word_clk) -
		1 + D2A_HS_TX_DELAY_DPHY;
	/**
	 * ((D2A_HS_TX delay * word clock period - T_CLK_HS_TRAIL
	 * 1 * word clock period - 4 * LPDCO clock period) / LPDCO clock period)
	 * - 1
	 * use 0, if negative
	 */
	tmp = (phy->hs_tx_0_thstrail_d + 1) * tm.t_word_clk - tm.t_word_clk -
		4 * T_DCO_MAX;
	phy->hs_tx_5_thstrail_dco_d = (tmp / T_DCO_MAX) - 1;

	tmp = (phy->hs_tx_0_thstrail_c + 1) * tm.t_word_clk - tm.t_word_clk -
		4 * T_DCO_MAX;
	phy->hs_tx_5_thstrail_dco_c = (tmp / T_DCO_MAX) - 1;

	/* (T_CLK-POST /  word clock period) - 3 */
	phy->hs_tx_8_tclkpost = DIV_ROUND_UP(tm.clk_post, tm.t_word_clk) - 3;
	/* (5 * T_ESC / T_DCO) - 1 */
	/* (T_HS-EXIT / LPDCO clock period) - 1 */
	phy->hs_tx_12_thsexit_dco = DIV_ROUND_UP(tm.hs_exit, T_DCO_MAX) - 1;

	DSI_DEBUG("hs_tx_3_tlptxoverlap %d\n",phy->hs_tx_3_tlptxoverlap);
	DSI_DEBUG("hx_tx_10_tlpt11init_dco %d\n",phy->hs_tx_10_tlpt11init_dco);
	DSI_DEBUG("hs_tx_6_tlp11end_dco %d\n",phy->hs_tx_6_tlp11end_dco);
	DSI_DEBUG("hs_tx_4_tlpx_dco %d\n",phy->hs_tx_4_tlpx_dco);
	DSI_DEBUG("hs_tx_9_thsprpr_dco_d %d\n",phy->hs_tx_9_thsprpr_dco_d);
	DSI_DEBUG("hs_tx_9_thsprpr_dco_c %d\n",phy->hs_tx_9_thsprpr_dco_c);
	DSI_DEBUG("hs_tx_1_thszero_d %d\n",phy->hs_tx_1_thszero_d);
	DSI_DEBUG("hs_tx_1_thszero_c %d\n",phy->hs_tx_1_thszero_c);
	DSI_DEBUG("hs_tx_0_thstrail_d %d\n",phy->hs_tx_0_thstrail_d);
	DSI_DEBUG("hs_tx_0_thstrail_c %d\n",phy->hs_tx_0_thstrail_c);
	DSI_DEBUG("hs_tx_5_thstrail_dco_d %d\n",phy->hs_tx_5_thstrail_dco_d);
	DSI_DEBUG("hs_tx_5_thstrail_dco_c %d\n",phy->hs_tx_5_thstrail_dco_c);
	DSI_DEBUG("hs_tx_8_tclkpost %d\n",phy->hs_tx_8_tclkpost);
	DSI_DEBUG("hs_tx_6_tlp11end_dco %d\n",phy->hs_tx_6_tlp11end_dco);
	DSI_DEBUG("hs_tx_12_thsexit_dco %d\n",phy->hs_tx_12_thsexit_dco);

	/************ CPHY ****************************************************/
	phy->hs_tx_13_tlptxoverlap   = tlptxoverlap;
	phy->hs_tx_12_tlpt11init_dco = tlpt11init_dco;
	phy->hs_tx_8_tlp11end_dco    = tlp11end_dco;
	phy->hs_tx_11_tlpx_dco       = tlpx_dco;
	phy->hs_tx_0_thsexit_dco     = thsexit_dco;

	/**
	 * ((T_LPX + T_CLK/HS-PREPARE + T_CLK/HS-ZERO +
	 * 5 * LPDCO clock period - 3 * word clock period) /
	 * word clock period) - 1
	 */
	tmp = T_LPX * 100 + tm.t3_prepare_dco + tm.t3_prebegin +
		5 * T_DCO_MAX - 3 * tm.t_word_clk;
	// is t3_prebegin_reg
	phy->hs_tx_10_tprebegin = DIV_ROUND_UP(tmp, tm.t_word_clk) - 1;

	tmp = T_LPX * 100  + tm.t3_prepare_dco + tm.t3_calpremble +
		5 * T_DCO_MAX - 3 * tm.t_word_clk;
	// is t3_calpremble_reg
	phy->hs_tx_2_tcalpreamble = DIV_ROUND_UP(tmp, tm.t_word_clk) - 1;
	//t3_post_reg
	phy->hs_tx_1_tpost = DIV_ROUND_UP(tm.t3_post, tm.t_word_clk) -
		1 + D2A_HS_TX_DELAY_CPHY;
	/**
	 * ((D2A_HS_TX delay * word clock period - T_CLK_HS_TRAIL
	 * 1 * word clock period - 4 * LPDCO clock period) / LPDCO clock period)
	 * - 1
	 * use 0, if negative
	 */
	tmp = (phy->hs_tx_1_tpost + 1) * tm.t_word_clk - tm.t_word_clk -
		3 * T_DCO_MAX;
	phy->hs_tx_9_t3post_dco = (tmp / T_DCO_MAX) - 1; // t3_post_dco_reg

	/* ((LPTX_IO_SR0_FAIL_DELAY + t3-prepare) / LPDCO clock period) - 1 */
	tmp = LPTX_IO_SR0_FAIL_DELAY + tm.t3_prepare;
	phy->hs_tx_7_t3prpr_dco = DIV_ROUND_UP(tmp, T_DCO_MAX) - 1;

	DSI_DEBUG("hs_tx_13_tlptxoverlap]: %d\n",   phy->hs_tx_13_tlptxoverlap);
	DSI_DEBUG("hs_tx_12_tlpt11init_dco]: %d\n", phy->hs_tx_12_tlpt11init_dco);
	DSI_DEBUG("[hs_tx_8_tlp11end_dco]: %d\n",    phy->hs_tx_8_tlp11end_dco);
	DSI_DEBUG("[hs_tx_11_tlpx_dco]: %d\n",       phy->hs_tx_11_tlpx_dco);
	DSI_DEBUG("[hs_tx_0_thsexit_dco]: %d\n",     phy->hs_tx_0_thsexit_dco);
	DSI_DEBUG("[hs_tx_10_tprebegin]: %d\n",      phy->hs_tx_10_tprebegin);
	DSI_DEBUG("[hs_tx_2_tcalpreamble]: %d\n",    phy->hs_tx_2_tcalpreamble);
	DSI_DEBUG("[hs_tx_1_tpost]: %d\n",           phy->hs_tx_1_tpost);
	DSI_DEBUG("[hs_tx_9_t3post_dco]: %d\n",      phy->hs_tx_9_t3post_dco);
	DSI_DEBUG("[hs_tx_7_t3prpr_dco]: %d\n",      phy->hs_tx_7_t3prpr_dco);
}

static void dsi_hw_dphy_tx_cfg(struct dpu_hw_blk *hw, u64 lanerate)
{
	struct phy_cfg dphy = {0};

	phy_parameter_fpga(lanerate, DSI_PHY_TYPE_DPHY, &dphy);

	DPU_BITMASK_WRITE(hw, PHY_0X3040_CORE_DIG_DLANE_0_RW_LP_0, 6,
		PHY_0X3040_LP_0_TTAGO_REG_SHIFT,
		PHY_0X3040_LP_0_TTAGO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3240_CORE_DIG_DLANE_1_RW_LP_0, 6,
		PHY_0X3240_LP_0_TTAGO_REG_SHIFT,
		PHY_0X3240_LP_0_TTAGO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3440_CORE_DIG_DLANE_2_RW_LP_0, 6,
		PHY_0X3440_LP_0_TTAGO_REG_SHIFT,
		PHY_0X3440_LP_0_TTAGO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3640_CORE_DIG_DLANE_3_RW_LP_0, 6,
		PHY_0X3640_LP_0_TTAGO_REG_SHIFT,
		PHY_0X3640_LP_0_TTAGO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X1022_CORE_DIG_IOCTRL_RW_AFE_LANE0_CTRL_2_2,
		0,
		PHY_0X1022_LANE0_SEL_LANE_CFG_SHIFT,
		PHY_0X1022_LANE0_SEL_LANE_CFG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X1222_CORE_DIG_IOCTRL_RW_AFE_LANE1_CTRL_2_2,
		0,
		PHY_0X1222_LANE1_SEL_LANE_CFG_SHIFT,
		PHY_0X1222_LANE1_SEL_LANE_CFG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X1422_CORE_DIG_IOCTRL_RW_AFE_LANE2_CTRL_2_2,
		1,
		PHY_0X1422_LANE2_SEL_LANE_CFG_SHIFT,
		PHY_0X1422_LANE2_SEL_LANE_CFG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X1622_CORE_DIG_IOCTRL_RW_AFE_LANE3_CTRL_2_2,
		0,
		PHY_0X1622_LANE3_SEL_LANE_CFG_SHIFT,
		PHY_0X1622_LANE3_SEL_LANE_CFG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X1822_CORE_DIG_IOCTRL_RW_AFE_LANE4_CTRL_2_2,
		0,
		PHY_0X1822_LANE4_SEL_LANE_CFG_SHIFT,
		PHY_0X1822_LANE4_SEL_LANE_CFG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X1C24_CORE_DIG_IOCTRL_RW_AFE_CB_CTRL_2_4, 4,
		PHY_0X1C24_OA_CB_SEL_VCOMM_PROG_SHIFT,
		PHY_0X1C24_OA_CB_SEL_VCOMM_PROG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X1023_CORE_DIG_IOCTRL_RW_AFE_LANE0_CTRL_2_3,
		0,
		PHY_0X1023_LANE0_HSTX_SEL_PHASE0_SHIFT,
		PHY_0X1023_LANE0_HSTX_SEL_PHASE0_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X1023_CORE_DIG_IOCTRL_RW_AFE_LANE0_CTRL_2_3,
		0,
		PHY_0X1023_LANE0_HSTX_SEL_CLKLB_SHIFT,
		PHY_0X1023_LANE0_HSTX_SEL_CLKLB_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X1223_CORE_DIG_IOCTRL_RW_AFE_LANE1_CTRL_2_3,
		0,
		PHY_0X1223_LANE1_HSTX_SEL_PHASE0_SHIFT,
		PHY_0X1223_LANE1_HSTX_SEL_PHASE0_MASK, DIRECT_WRITE);
	DPU_BITMASK_WRITE(hw, PHY_0X1223_CORE_DIG_IOCTRL_RW_AFE_LANE1_CTRL_2_3,
		0,
		PHY_0X1223_LANE1_HSTX_SEL_CLKLB_SHIFT,
		PHY_0X1223_LANE1_HSTX_SEL_CLKLB_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X1423_CORE_DIG_IOCTRL_RW_AFE_LANE2_CTRL_2_3,
		1,
		PHY_0X1423_LANE2_HSTX_SEL_PHASE0_SHIFT,
		PHY_0X1423_LANE2_HSTX_SEL_PHASE0_MASK, DIRECT_WRITE);
	DPU_BITMASK_WRITE(hw, PHY_0X1423_CORE_DIG_IOCTRL_RW_AFE_LANE2_CTRL_2_3,
		0,
		PHY_0X1423_LANE2_HSTX_SEL_CLKLB_SHIFT,
		PHY_0X1423_LANE2_HSTX_SEL_CLKLB_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X1623_CORE_DIG_IOCTRL_RW_AFE_LANE3_CTRL_2_3,
		0,
		PHY_0X1623_LANE3_HSTX_SEL_PHASE0_SHIFT,
		PHY_0X1623_LANE3_HSTX_SEL_PHASE0_MASK, DIRECT_WRITE);
	DPU_BITMASK_WRITE(hw, PHY_0X1623_CORE_DIG_IOCTRL_RW_AFE_LANE3_CTRL_2_3,
		0,
		PHY_0X1623_LANE3_HSTX_SEL_CLKLB_SHIFT,
		PHY_0X1623_LANE3_HSTX_SEL_CLKLB_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X1823_CORE_DIG_IOCTRL_RW_AFE_LANE4_CTRL_2_3,
		0,
		PHY_0X1823_LANE4_HSTX_SEL_PHASE0_SHIFT,
		PHY_0X1823_LANE4_HSTX_SEL_PHASE0_MASK, DIRECT_WRITE);
	DPU_BITMASK_WRITE(hw, PHY_0X1823_CORE_DIG_IOCTRL_RW_AFE_LANE4_CTRL_2_3,
		0,
		PHY_0X1823_LANE4_HSTX_SEL_CLKLB_SHIFT,
		PHY_0X1823_LANE4_HSTX_SEL_CLKLB_MASK, DIRECT_WRITE);

	DPU_REG_WRITE(hw, PHY_0X3000_CORE_DIG_DLANE_0_RW_CFG_0, 0, DIRECT_WRITE);
	DPU_REG_WRITE(hw, PHY_0X3200_CORE_DIG_DLANE_1_RW_CFG_0, 0, DIRECT_WRITE);
	DPU_REG_WRITE(hw, PHY_0X3400_CORE_DIG_DLANE_2_RW_CFG_0, 0, DIRECT_WRITE);
	DPU_REG_WRITE(hw, PHY_0X3600_CORE_DIG_DLANE_3_RW_CFG_0, 0, DIRECT_WRITE);
	DPU_REG_WRITE(hw, PHY_0X3800_CORE_DIG_DLANE_CLK_RW_CFG_0, 0, DIRECT_WRITE);

	/* check for Appendix B, Support Formula start */
	DPU_BITMASK_WRITE(hw, PHY_0X3103_CORE_DIG_DLANE_0_RW_HS_TX_3,
		dphy.hs_tx_3_tlptxoverlap,
		PHY_0X3103_HS_TX_3_TLPTXOVERLAP_REG_SHIFT,
		PHY_0X3103_HS_TX_3_TLPTXOVERLAP_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3303_CORE_DIG_DLANE_1_RW_HS_TX_3,
		dphy.hs_tx_3_tlptxoverlap,
		PHY_0X3303_HS_TX_3_TLPTXOVERLAP_REG_SHIFT,
		PHY_0X3303_HS_TX_3_TLPTXOVERLAP_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3503_CORE_DIG_DLANE_2_RW_HS_TX_3,
		dphy.hs_tx_3_tlptxoverlap,
		PHY_0X3503_HS_TX_3_TLPTXOVERLAP_REG_SHIFT,
		PHY_0X3503_HS_TX_3_TLPTXOVERLAP_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3703_CORE_DIG_DLANE_3_RW_HS_TX_3,
		dphy.hs_tx_3_tlptxoverlap,
		PHY_0X3703_HS_TX_3_TLPTXOVERLAP_REG_SHIFT,
		PHY_0X3703_HS_TX_3_TLPTXOVERLAP_REG_MASK, DIRECT_WRITE);

	DPU_REG_WRITE(hw, PHY_0X3903_CORE_DIG_DLANE_CLK_RW_HS_TX_3, 0x2, DIRECT_WRITE);
	DPU_REG_WRITE(hw, PHY_0X5000_CORE_DIG_CLANE_0_RW_CFG_0, 0xF0, DIRECT_WRITE);
	DPU_REG_WRITE(hw, PHY_0X5200_CORE_DIG_CLANE_1_RW_CFG_0, 0xF0, DIRECT_WRITE);
	DPU_REG_WRITE(hw, PHY_0X5400_CORE_DIG_CLANE_2_RW_CFG_0, 0xF0, DIRECT_WRITE);
	DPU_REG_WRITE(hw, PHY_0X5106_CORE_DIG_CLANE_0_RW_HS_TX_6, 0, DIRECT_WRITE);
	DPU_REG_WRITE(hw, PHY_0X5306_CORE_DIG_CLANE_1_RW_HS_TX_6, 0, DIRECT_WRITE);
	DPU_REG_WRITE(hw, PHY_0X5506_CORE_DIG_CLANE_2_RW_HS_TX_6, 0, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X310A_CORE_DIG_DLANE_0_RW_HS_TX_10,
		dphy.hs_tx_10_tlpt11init_dco,
		PHY_0X310A_HS_TX_10_TLP11INIT_DCO_REG_SHIFT,
		PHY_0X310A_HS_TX_10_TLP11INIT_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X330A_CORE_DIG_DLANE_1_RW_HS_TX_10,
		dphy.hs_tx_10_tlpt11init_dco,
		PHY_0X330A_HS_TX_10_TLP11INIT_DCO_REG_SHIFT,
		PHY_0X330A_HS_TX_10_TLP11INIT_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X350A_CORE_DIG_DLANE_2_RW_HS_TX_10,
		dphy.hs_tx_10_tlpt11init_dco,
		PHY_0X350A_HS_TX_10_TLP11INIT_DCO_REG_SHIFT,
		PHY_0X350A_HS_TX_10_TLP11INIT_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X370A_CORE_DIG_DLANE_3_RW_HS_TX_10,
		dphy.hs_tx_10_tlpt11init_dco,
		PHY_0X370A_HS_TX_10_TLP11INIT_DCO_REG_SHIFT,
		PHY_0X370A_HS_TX_10_TLP11INIT_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3104_CORE_DIG_DLANE_0_RW_HS_TX_4,
		dphy.hs_tx_4_tlpx_dco,
		PHY_0X3104_HS_TX_4_TLPX_DCO_REG_SHIFT,
		PHY_0X3104_HS_TX_4_TLPX_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3304_CORE_DIG_DLANE_1_RW_HS_TX_4,
		dphy.hs_tx_4_tlpx_dco,
		PHY_0X3304_HS_TX_4_TLPX_DCO_REG_SHIFT,
		PHY_0X3304_HS_TX_4_TLPX_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3504_CORE_DIG_DLANE_2_RW_HS_TX_4,
		dphy.hs_tx_4_tlpx_dco,
		PHY_0X3504_HS_TX_4_TLPX_DCO_REG_SHIFT,
		PHY_0X3504_HS_TX_4_TLPX_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3704_CORE_DIG_DLANE_3_RW_HS_TX_4,
		dphy.hs_tx_4_tlpx_dco,
		PHY_0X3704_HS_TX_4_TLPX_DCO_REG_SHIFT,
		PHY_0X3704_HS_TX_4_TLPX_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3109_CORE_DIG_DLANE_0_RW_HS_TX_9,
		dphy.hs_tx_9_thsprpr_dco_d,
		PHY_0X3109_HS_TX_9_THSPRPR_DCO_REG_SHIFT,
		PHY_0X3109_HS_TX_9_THSPRPR_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3309_CORE_DIG_DLANE_1_RW_HS_TX_9,
		dphy.hs_tx_9_thsprpr_dco_d,
		PHY_0X3309_HS_TX_9_THSPRPR_DCO_REG_SHIFT,
		PHY_0X3309_HS_TX_9_THSPRPR_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3509_CORE_DIG_DLANE_2_RW_HS_TX_9,
		dphy.hs_tx_9_thsprpr_dco_d,
		PHY_0X3509_HS_TX_9_THSPRPR_DCO_REG_SHIFT,
		PHY_0X3509_HS_TX_9_THSPRPR_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3709_CORE_DIG_DLANE_3_RW_HS_TX_9,
		dphy.hs_tx_9_thsprpr_dco_d,
		PHY_0X3709_HS_TX_9_THSPRPR_DCO_REG_SHIFT,
		PHY_0X3709_HS_TX_9_THSPRPR_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3101_CORE_DIG_DLANE_0_RW_HS_TX_1,
		dphy.hs_tx_1_thszero_d,
		PHY_0X3101_HS_TX_1_THSZERO_REG_SHIFT,
		PHY_0X3101_HS_TX_1_THSZERO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3301_CORE_DIG_DLANE_1_RW_HS_TX_1,
		dphy.hs_tx_1_thszero_d,
		PHY_0X3301_HS_TX_1_THSZERO_REG_SHIFT,
		PHY_0X3301_HS_TX_1_THSZERO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3501_CORE_DIG_DLANE_2_RW_HS_TX_1,
		dphy.hs_tx_1_thszero_d,
		PHY_0X3501_HS_TX_1_THSZERO_REG_SHIFT,
		PHY_0X3501_HS_TX_1_THSZERO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3701_CORE_DIG_DLANE_3_RW_HS_TX_1,
		dphy.hs_tx_1_thszero_d,
		PHY_0X3701_HS_TX_1_THSZERO_REG_SHIFT,
		PHY_0X3701_HS_TX_1_THSZERO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3100_CORE_DIG_DLANE_0_RW_HS_TX_0,
		dphy.hs_tx_0_thstrail_d,
		PHY_0X3100_HS_TX_0_THSTRAIL_REG_SHIFT,
		PHY_0X3100_HS_TX_0_THSTRAIL_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3300_CORE_DIG_DLANE_1_RW_HS_TX_0,
		dphy.hs_tx_0_thstrail_d,
		PHY_0X3300_HS_TX_0_THSTRAIL_REG_SHIFT,
		PHY_0X3300_HS_TX_0_THSTRAIL_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3500_CORE_DIG_DLANE_2_RW_HS_TX_0,
		dphy.hs_tx_0_thstrail_d,
		PHY_0X3500_HS_TX_0_THSTRAIL_REG_SHIFT,
		PHY_0X3500_HS_TX_0_THSTRAIL_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3700_CORE_DIG_DLANE_3_RW_HS_TX_0,
		dphy.hs_tx_0_thstrail_d,
		PHY_0X3700_HS_TX_0_THSTRAIL_REG_SHIFT,
		PHY_0X3700_HS_TX_0_THSTRAIL_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3105_CORE_DIG_DLANE_0_RW_HS_TX_5,
		dphy.hs_tx_5_thstrail_dco_d,
		PHY_0X3105_HS_TX_5_THSTRAIL_DCO_REG_SHIFT,
		PHY_0X3105_HS_TX_5_THSTRAIL_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3305_CORE_DIG_DLANE_1_RW_HS_TX_5,
		dphy.hs_tx_5_thstrail_dco_d,
		PHY_0X3305_HS_TX_5_THSTRAIL_DCO_REG_SHIFT,
		PHY_0X3305_HS_TX_5_THSTRAIL_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3505_CORE_DIG_DLANE_2_RW_HS_TX_5,
		dphy.hs_tx_5_thstrail_dco_d,
		PHY_0X3505_HS_TX_5_THSTRAIL_DCO_REG_SHIFT,
		PHY_0X3505_HS_TX_5_THSTRAIL_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3705_CORE_DIG_DLANE_3_RW_HS_TX_5,
		dphy.hs_tx_5_thstrail_dco_d,
		PHY_0X3705_HS_TX_5_THSTRAIL_DCO_REG_SHIFT,
		PHY_0X3705_HS_TX_5_THSTRAIL_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3106_CORE_DIG_DLANE_0_RW_HS_TX_6,
		dphy.hs_tx_6_tlp11end_dco,
		PHY_0X3106_HS_TX_6_TLP11END_DCO_REG_SHIFT,
		PHY_0X3106_HS_TX_6_TLP11END_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3306_CORE_DIG_DLANE_1_RW_HS_TX_6,
		dphy.hs_tx_6_tlp11end_dco,
		PHY_0X3306_HS_TX_6_TLP11END_DCO_REG_SHIFT,
		PHY_0X3306_HS_TX_6_TLP11END_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3506_CORE_DIG_DLANE_2_RW_HS_TX_6,
		dphy.hs_tx_6_tlp11end_dco,
		PHY_0X3506_HS_TX_6_TLP11END_DCO_REG_SHIFT,
		PHY_0X3506_HS_TX_6_TLP11END_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3706_CORE_DIG_DLANE_3_RW_HS_TX_6,
		dphy.hs_tx_6_tlp11end_dco,
		PHY_0X3706_HS_TX_6_TLP11END_DCO_REG_SHIFT,
		PHY_0X3706_HS_TX_6_TLP11END_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X310C_CORE_DIG_DLANE_0_RW_HS_TX_12,
		dphy.hs_tx_12_thsexit_dco,
		PHY_0X310C_HS_TX_12_THSEXIT_DCO_REG_SHIFT,
		PHY_0X310C_HS_TX_12_THSEXIT_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X330C_CORE_DIG_DLANE_1_RW_HS_TX_12,
		dphy.hs_tx_12_thsexit_dco,
		PHY_0X330C_HS_TX_12_THSEXIT_DCO_REG_SHIFT,
		PHY_0X330C_HS_TX_12_THSEXIT_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X350C_CORE_DIG_DLANE_2_RW_HS_TX_12,
		dphy.hs_tx_12_thsexit_dco,
		PHY_0X350C_HS_TX_12_THSEXIT_DCO_REG_SHIFT,
		PHY_0X350C_HS_TX_12_THSEXIT_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X370C_CORE_DIG_DLANE_3_RW_HS_TX_12,
		dphy.hs_tx_12_thsexit_dco,
		PHY_0X370C_HS_TX_12_THSEXIT_DCO_REG_SHIFT,
		PHY_0X370C_HS_TX_12_THSEXIT_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3903_CORE_DIG_DLANE_CLK_RW_HS_TX_3,
		dphy.hs_tx_3_tlptxoverlap,
		PHY_0X3903_HS_TX_3_TLPTXOVERLAP_REG_SHIFT,
		PHY_0X3903_HS_TX_3_TLPTXOVERLAP_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X390A_CORE_DIG_DLANE_CLK_RW_HS_TX_10,
		dphy.hs_tx_10_tlpt11init_dco,
		PHY_0X390A_HS_TX_10_TLP11INIT_DCO_REG_SHIFT,
		PHY_0X390A_HS_TX_10_TLP11INIT_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3904_CORE_DIG_DLANE_CLK_RW_HS_TX_4,
		dphy.hs_tx_4_tlpx_dco,
		PHY_0X3904_HS_TX_4_TLPX_DCO_REG_SHIFT,
		PHY_0X3904_HS_TX_4_TLPX_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3909_CORE_DIG_DLANE_CLK_RW_HS_TX_9,
		dphy.hs_tx_9_thsprpr_dco_c,
		PHY_0X3909_HS_TX_9_THSPRPR_DCO_REG_SHIFT,
		PHY_0X3909_HS_TX_9_THSPRPR_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3901_CORE_DIG_DLANE_CLK_RW_HS_TX_1,
		dphy.hs_tx_1_thszero_c,
		PHY_0X3901_HS_TX_1_THSZERO_REG_SHIFT,
		PHY_0X3901_HS_TX_1_THSZERO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3902_CORE_DIG_DLANE_CLK_RW_HS_TX_2,
		3,
		PHY_0X3902_HS_TX_2_TCLKPRE_REG_SHIFT,
		PHY_0X3902_HS_TX_2_TCLKPRE_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3900_CORE_DIG_DLANE_CLK_RW_HS_TX_0,
		dphy.hs_tx_0_thstrail_c,
		PHY_0X3900_HS_TX_0_THSTRAIL_REG_SHIFT,
		PHY_0X3900_HS_TX_0_THSTRAIL_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3905_CORE_DIG_DLANE_CLK_RW_HS_TX_5,
		dphy.hs_tx_5_thstrail_dco_c,
		PHY_0X3905_HS_TX_5_THSTRAIL_DCO_REG_SHIFT,
		PHY_0X3905_HS_TX_5_THSTRAIL_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3908_CORE_DIG_DLANE_CLK_RW_HS_TX_8,
		dphy.hs_tx_8_tclkpost,
		PHY_0X3908_HS_TX_8_TCLKPOST_REG_SHIFT,
		PHY_0X3908_HS_TX_8_TCLKPOST_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3906_CORE_DIG_DLANE_CLK_RW_HS_TX_6,
		dphy.hs_tx_6_tlp11end_dco,
		PHY_0X3906_HS_TX_6_TLP11END_DCO_REG_SHIFT,
		PHY_0X3906_HS_TX_6_TLP11END_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X390C_CORE_DIG_DLANE_CLK_RW_HS_TX_12,
		dphy.hs_tx_12_thsexit_dco,
		PHY_0X390C_HS_TX_12_THSEXIT_DCO_REG_SHIFT,
		PHY_0X390C_HS_TX_12_THSEXIT_DCO_REG_MASK, DIRECT_WRITE);
}


static void dsi_hw_cphy_tx_cfg(struct dpu_hw_blk *hw, u64 lanerate)
{
	struct phy_cfg cphy = {0};

	phy_parameter_fpga(lanerate, DSI_PHY_TYPE_CPHY, &cphy);

	DPU_BITMASK_WRITE(hw, PHY_0X5040_CORE_DIG_CLANE_0_RW_LP_0, 6,
		PHY_0X5040_LP_0_TTAGO_REG_SHIFT,
		PHY_0X5040_LP_0_TTAGO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5240_CORE_DIG_CLANE_1_RW_LP_0, 6,
		PHY_0X5240_LP_0_TTAGO_REG_SHIFT,
		PHY_0X5240_LP_0_TTAGO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5440_CORE_DIG_CLANE_2_RW_LP_0, 6,
		PHY_0X5440_LP_0_TTAGO_REG_SHIFT,
		PHY_0X5440_LP_0_TTAGO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X1022_CORE_DIG_IOCTRL_RW_AFE_LANE0_CTRL_2_2,
		1, PHY_0X1022_LANE0_SEL_LANE_CFG_SHIFT,
		PHY_0X1022_LANE0_SEL_LANE_CFG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X1222_CORE_DIG_IOCTRL_RW_AFE_LANE1_CTRL_2_2,
		0, PHY_0X1222_LANE1_SEL_LANE_CFG_SHIFT,
		PHY_0X1222_LANE1_SEL_LANE_CFG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X1422_CORE_DIG_IOCTRL_RW_AFE_LANE2_CTRL_2_2,
		1, PHY_0X1422_LANE2_SEL_LANE_CFG_SHIFT,
		PHY_0X1422_LANE2_SEL_LANE_CFG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X1622_CORE_DIG_IOCTRL_RW_AFE_LANE3_CTRL_2_2,
		1, PHY_0X1622_LANE3_SEL_LANE_CFG_SHIFT,
		PHY_0X1622_LANE3_SEL_LANE_CFG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X1822_CORE_DIG_IOCTRL_RW_AFE_LANE4_CTRL_2_2,
		0, PHY_0X1822_LANE4_SEL_LANE_CFG_SHIFT,
		PHY_0X1822_LANE4_SEL_LANE_CFG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X1C24_CORE_DIG_IOCTRL_RW_AFE_CB_CTRL_2_4, 3,
		PHY_0X1C24_OA_CB_SEL_VCOMM_PROG_SHIFT,
		PHY_0X1C24_OA_CB_SEL_VCOMM_PROG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X1023_CORE_DIG_IOCTRL_RW_AFE_LANE0_CTRL_2_3,
		0, PHY_0X1023_LANE0_HSTX_SEL_PHASE0_SHIFT,
		PHY_0X1023_LANE0_HSTX_SEL_PHASE0_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X1223_CORE_DIG_IOCTRL_RW_AFE_LANE1_CTRL_2_3,
		0, PHY_0X1223_LANE1_HSTX_SEL_PHASE0_SHIFT,
		PHY_0X1223_LANE1_HSTX_SEL_PHASE0_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X1423_CORE_DIG_IOCTRL_RW_AFE_LANE2_CTRL_2_3,
		0, PHY_0X1423_LANE2_HSTX_SEL_PHASE0_SHIFT,
		PHY_0X1423_LANE2_HSTX_SEL_PHASE0_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5100_CORE_DIG_CLANE_0_RW_HS_TX_0, 23,
		PHY_0X5100_HS_TX_0_THSEXIT_DCO_REG_SHIFT,
		PHY_0X5100_HS_TX_0_THSEXIT_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5300_CORE_DIG_CLANE_1_RW_HS_TX_0, 23,
		PHY_0X5300_HS_TX_0_THSEXIT_DCO_REG_SHIFT,
		PHY_0X5300_HS_TX_0_THSEXIT_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5500_CORE_DIG_CLANE_2_RW_HS_TX_0, 23,
		PHY_0X5500_HS_TX_0_THSEXIT_DCO_REG_SHIFT,
		PHY_0X5500_HS_TX_0_THSEXIT_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X510D_CORE_DIG_CLANE_0_RW_HS_TX_13, 2,
		PHY_0X510D_HS_TX_13_TLPTXOVERLAP_REG_SHIFT,
		PHY_0X510D_HS_TX_13_TLPTXOVERLAP_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X530D_CORE_DIG_CLANE_1_RW_HS_TX_13, 2,
		PHY_0X530D_HS_TX_13_TLPTXOVERLAP_REG_SHIFT,
		PHY_0X530D_HS_TX_13_TLPTXOVERLAP_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X550D_CORE_DIG_CLANE_2_RW_HS_TX_13, 2,
		PHY_0X550D_HS_TX_13_TLPTXOVERLAP_REG_SHIFT,
		PHY_0X550D_HS_TX_13_TLPTXOVERLAP_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X510C_CORE_DIG_CLANE_0_RW_HS_TX_12, 52,
		PHY_0X510C_HS_TX_12_TLP11INIT_DCO_REG_SHIFT,
		PHY_0X510C_HS_TX_12_TLP11INIT_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X530C_CORE_DIG_CLANE_1_RW_HS_TX_12, 52,
		PHY_0X530C_HS_TX_12_TLP11INIT_DCO_REG_SHIFT,
		PHY_0X530C_HS_TX_12_TLP11INIT_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X550C_CORE_DIG_CLANE_2_RW_HS_TX_12, 52,
		PHY_0X550C_HS_TX_12_TLP11INIT_DCO_REG_SHIFT,
		PHY_0X550C_HS_TX_12_TLP11INIT_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X510B_CORE_DIG_CLANE_0_RW_HS_TX_11, 11,
		PHY_0X510B_HS_TX_11_TLPX_DCO_REG_SHIFT,
		PHY_0X510B_HS_TX_11_TLPX_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X530B_CORE_DIG_CLANE_1_RW_HS_TX_11, 11,
		PHY_0X530B_HS_TX_11_TLPX_DCO_REG_SHIFT,
		PHY_0X530B_HS_TX_11_TLPX_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X550B_CORE_DIG_CLANE_2_RW_HS_TX_11, 11,
		PHY_0X550B_HS_TX_11_TLPX_DCO_REG_SHIFT,
		PHY_0X550B_HS_TX_11_TLPX_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5107_CORE_DIG_CLANE_0_RW_HS_TX_7, 17,
		PHY_0X5107_HS_TX_7_T3PRPR_DCO_REG_SHIFT,
		PHY_0X5107_HS_TX_7_T3PRPR_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5307_CORE_DIG_CLANE_1_RW_HS_TX_7, 17,
		PHY_0X5307_HS_TX_7_T3PRPR_DCO_REG_SHIFT,
		PHY_0X5307_HS_TX_7_T3PRPR_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5507_CORE_DIG_CLANE_2_RW_HS_TX_7, 17,
		PHY_0X5507_HS_TX_7_T3PRPR_DCO_REG_SHIFT,
		PHY_0X5507_HS_TX_7_T3PRPR_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X510A_CORE_DIG_CLANE_0_RW_HS_TX_10,
		cphy.hs_tx_10_tprebegin,
		PHY_0X510A_HS_TX_10_TPREBEGIN_REG_SHIFT,
		PHY_0X510A_HS_TX_10_TPREBEGIN_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X530A_CORE_DIG_CLANE_1_RW_HS_TX_10,
		cphy.hs_tx_10_tprebegin,
		PHY_0X530A_HS_TX_10_TPREBEGIN_REG_SHIFT,
		PHY_0X530A_HS_TX_10_TPREBEGIN_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X550A_CORE_DIG_CLANE_2_RW_HS_TX_10,
		cphy.hs_tx_10_tprebegin,
		PHY_0X550A_HS_TX_10_TPREBEGIN_REG_SHIFT,
		PHY_0X550A_HS_TX_10_TPREBEGIN_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5101_CORE_DIG_CLANE_0_RW_HS_TX_1, 20,
		PHY_0X5101_HS_TX_1_TPOST_REG_SHIFT,
		PHY_0X5101_HS_TX_1_TPOST_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5301_CORE_DIG_CLANE_1_RW_HS_TX_1, 20,
		PHY_0X5301_HS_TX_1_TPOST_REG_SHIFT,
		PHY_0X5301_HS_TX_1_TPOST_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5501_CORE_DIG_CLANE_2_RW_HS_TX_1, 20,
		PHY_0X5501_HS_TX_1_TPOST_REG_SHIFT,
		PHY_0X5501_HS_TX_1_TPOST_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5102_CORE_DIG_CLANE_0_RW_HS_TX_2,
		cphy.hs_tx_2_tcalpreamble,
		PHY_0X5102_HS_TX_2_TCALPREAMBLE_REG_SHIFT,
		PHY_0X5102_HS_TX_2_TCALPREAMBLE_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5302_CORE_DIG_CLANE_1_RW_HS_TX_2,
		cphy.hs_tx_2_tcalpreamble,
		PHY_0X5302_HS_TX_2_TCALPREAMBLE_REG_SHIFT,
		PHY_0X5302_HS_TX_2_TCALPREAMBLE_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5502_CORE_DIG_CLANE_2_RW_HS_TX_2,
		cphy.hs_tx_2_tcalpreamble,
		PHY_0X5502_HS_TX_2_TCALPREAMBLE_REG_SHIFT,
		PHY_0X5502_HS_TX_2_TCALPREAMBLE_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5108_CORE_DIG_CLANE_0_RW_HS_TX_8, 52,
		PHY_0X5108_HS_TX_8_TLP11END_DCO_REG_SHIFT,
		PHY_0X5108_HS_TX_8_TLP11END_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5308_CORE_DIG_CLANE_1_RW_HS_TX_8, 52,
		PHY_0X5308_HS_TX_8_TLP11END_DCO_REG_SHIFT,
		PHY_0X5308_HS_TX_8_TLP11END_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5508_CORE_DIG_CLANE_2_RW_HS_TX_8, 52,
		PHY_0X5508_HS_TX_8_TLP11END_DCO_REG_SHIFT,
		PHY_0X5508_HS_TX_8_TLP11END_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5109_CORE_DIG_CLANE_0_RW_HS_TX_9,
		cphy.hs_tx_9_t3post_dco,
		PHY_0X5109_HS_TX_9_T3POST_DCO_REG_SHIFT,
		PHY_0X5109_HS_TX_9_T3POST_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5309_CORE_DIG_CLANE_1_RW_HS_TX_9,
		cphy.hs_tx_9_t3post_dco,
		PHY_0X5309_HS_TX_9_T3POST_DCO_REG_SHIFT,
		PHY_0X5309_HS_TX_9_T3POST_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5509_CORE_DIG_CLANE_2_RW_HS_TX_9,
		cphy.hs_tx_9_t3post_dco,
		PHY_0X5509_HS_TX_9_T3POST_DCO_REG_SHIFT,
		PHY_0X5509_HS_TX_9_T3POST_DCO_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5103_CORE_DIG_CLANE_0_RW_HS_TX_3, 0,
		PHY_0X5103_HS_TX_3_BURST_TYPE_REG_SHIFT,
		PHY_0X5103_HS_TX_3_BURST_TYPE_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5303_CORE_DIG_CLANE_1_RW_HS_TX_3, 0,
		PHY_0X5303_HS_TX_3_BURST_TYPE_REG_SHIFT,
		PHY_0X5303_HS_TX_3_BURST_TYPE_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5503_CORE_DIG_CLANE_2_RW_HS_TX_3, 0,
		PHY_0X5503_HS_TX_3_BURST_TYPE_REG_SHIFT,
		PHY_0X5503_HS_TX_3_BURST_TYPE_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5104_CORE_DIG_CLANE_0_RW_HS_TX_4, 0,
		PHY_0X5104_HS_TX_4_PROGSEQSYMB0_REG_SHIFT,
		PHY_0X5104_HS_TX_4_PROGSEQSYMB0_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5304_CORE_DIG_CLANE_1_RW_HS_TX_4, 0,
		PHY_0X5304_HS_TX_4_PROGSEQSYMB0_REG_SHIFT,
		PHY_0X5304_HS_TX_4_PROGSEQSYMB0_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5504_CORE_DIG_CLANE_2_RW_HS_TX_4, 0,
		PHY_0X5504_HS_TX_4_PROGSEQSYMB0_REG_SHIFT,
		PHY_0X5504_HS_TX_4_PROGSEQSYMB0_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5104_CORE_DIG_CLANE_0_RW_HS_TX_4, 0,
		PHY_0X5104_HS_TX_4_PROGSEQSYMB1_REG_SHIFT,
		PHY_0X5104_HS_TX_4_PROGSEQSYMB1_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5304_CORE_DIG_CLANE_1_RW_HS_TX_4, 0,
		PHY_0X5304_HS_TX_4_PROGSEQSYMB1_REG_SHIFT,
		PHY_0X5304_HS_TX_4_PROGSEQSYMB1_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5504_CORE_DIG_CLANE_2_RW_HS_TX_4, 0,
		PHY_0X5504_HS_TX_4_PROGSEQSYMB1_REG_SHIFT,
		PHY_0X5504_HS_TX_4_PROGSEQSYMB1_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5104_CORE_DIG_CLANE_0_RW_HS_TX_4, 0,
		PHY_0X5104_HS_TX_4_PROGSEQSYMB2_REG_SHIFT,
		PHY_0X5104_HS_TX_4_PROGSEQSYMB2_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5304_CORE_DIG_CLANE_1_RW_HS_TX_4, 0,
		PHY_0X5304_HS_TX_4_PROGSEQSYMB2_REG_SHIFT,
		PHY_0X5304_HS_TX_4_PROGSEQSYMB2_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5504_CORE_DIG_CLANE_2_RW_HS_TX_4, 0,
		PHY_0X5504_HS_TX_4_PROGSEQSYMB2_REG_SHIFT,
		PHY_0X5504_HS_TX_4_PROGSEQSYMB2_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5104_CORE_DIG_CLANE_0_RW_HS_TX_4, 0,
		PHY_0X5104_HS_TX_4_PROGSEQSYMB3_REG_SHIFT,
		PHY_0X5104_HS_TX_4_PROGSEQSYMB3_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5304_CORE_DIG_CLANE_1_RW_HS_TX_4, 0,
		PHY_0X5304_HS_TX_4_PROGSEQSYMB3_REG_SHIFT,
		PHY_0X5304_HS_TX_4_PROGSEQSYMB3_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5504_CORE_DIG_CLANE_2_RW_HS_TX_4, 0,
		PHY_0X5504_HS_TX_4_PROGSEQSYMB3_REG_SHIFT,
		PHY_0X5504_HS_TX_4_PROGSEQSYMB3_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5104_CORE_DIG_CLANE_0_RW_HS_TX_4, 0,
		PHY_0X5104_HS_TX_4_PROGSEQSYMB4_REG_SHIFT,
		PHY_0X5104_HS_TX_4_PROGSEQSYMB4_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5304_CORE_DIG_CLANE_1_RW_HS_TX_4, 0,
		PHY_0X5304_HS_TX_4_PROGSEQSYMB4_REG_SHIFT,
		PHY_0X5304_HS_TX_4_PROGSEQSYMB4_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5504_CORE_DIG_CLANE_2_RW_HS_TX_4, 0,
		PHY_0X5504_HS_TX_4_PROGSEQSYMB4_REG_SHIFT,
		PHY_0X5504_HS_TX_4_PROGSEQSYMB4_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5105_CORE_DIG_CLANE_0_RW_HS_TX_5, 0,
		PHY_0X5105_HS_TX_5_PROGSEQSYMB5_REG_SHIFT,
		PHY_0X5105_HS_TX_5_PROGSEQSYMB5_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5305_CORE_DIG_CLANE_1_RW_HS_TX_5, 0,
		PHY_0X5305_HS_TX_5_PROGSEQSYMB5_REG_SHIFT,
		PHY_0X5305_HS_TX_5_PROGSEQSYMB5_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5505_CORE_DIG_CLANE_2_RW_HS_TX_5, 0,
		PHY_0X5505_HS_TX_5_PROGSEQSYMB5_REG_SHIFT,
		PHY_0X5505_HS_TX_5_PROGSEQSYMB5_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5105_CORE_DIG_CLANE_0_RW_HS_TX_5, 0,
		PHY_0X5105_HS_TX_5_PROGSEQSYMB6_REG_SHIFT,
		PHY_0X5105_HS_TX_5_PROGSEQSYMB6_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5305_CORE_DIG_CLANE_1_RW_HS_TX_5, 0,
		PHY_0X5305_HS_TX_5_PROGSEQSYMB6_REG_SHIFT,
		PHY_0X5305_HS_TX_5_PROGSEQSYMB6_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5505_CORE_DIG_CLANE_2_RW_HS_TX_5, 0,
		PHY_0X5505_HS_TX_5_PROGSEQSYMB6_REG_SHIFT,
		PHY_0X5505_HS_TX_5_PROGSEQSYMB6_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5105_CORE_DIG_CLANE_0_RW_HS_TX_5, 0,
		PHY_0X5105_HS_TX_5_PROGSEQSYMB7_REG_SHIFT,
		PHY_0X5105_HS_TX_5_PROGSEQSYMB7_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5305_CORE_DIG_CLANE_1_RW_HS_TX_5, 0,
		PHY_0X5305_HS_TX_5_PROGSEQSYMB7_REG_SHIFT,
		PHY_0X5305_HS_TX_5_PROGSEQSYMB7_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5505_CORE_DIG_CLANE_2_RW_HS_TX_5, 0,
		PHY_0X5505_HS_TX_5_PROGSEQSYMB7_REG_SHIFT,
		PHY_0X5505_HS_TX_5_PROGSEQSYMB7_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5105_CORE_DIG_CLANE_0_RW_HS_TX_5, 0,
		PHY_0X5105_HS_TX_5_PROGSEQSYMB8_REG_SHIFT,
		PHY_0X5105_HS_TX_5_PROGSEQSYMB8_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5305_CORE_DIG_CLANE_1_RW_HS_TX_5, 0,
		PHY_0X5305_HS_TX_5_PROGSEQSYMB8_REG_SHIFT,
		PHY_0X5305_HS_TX_5_PROGSEQSYMB8_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5505_CORE_DIG_CLANE_2_RW_HS_TX_5, 0,
		PHY_0X5505_HS_TX_5_PROGSEQSYMB8_REG_SHIFT,
		PHY_0X5505_HS_TX_5_PROGSEQSYMB8_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5105_CORE_DIG_CLANE_0_RW_HS_TX_5, 0,
		PHY_0X5105_HS_TX_5_PROGSEQSYMB9_REG_SHIFT,
		PHY_0X5105_HS_TX_5_PROGSEQSYMB9_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5305_CORE_DIG_CLANE_1_RW_HS_TX_5, 0,
		PHY_0X5305_HS_TX_5_PROGSEQSYMB9_REG_SHIFT,
		PHY_0X5305_HS_TX_5_PROGSEQSYMB9_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5505_CORE_DIG_CLANE_2_RW_HS_TX_5, 0,
		PHY_0X5505_HS_TX_5_PROGSEQSYMB9_REG_SHIFT,
		PHY_0X5505_HS_TX_5_PROGSEQSYMB9_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5106_CORE_DIG_CLANE_0_RW_HS_TX_6, 0,
		PHY_0X5106_HS_TX_6_PROGSEQSYMB10_REG_SHIFT,
		PHY_0X5106_HS_TX_6_PROGSEQSYMB10_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5306_CORE_DIG_CLANE_1_RW_HS_TX_6, 0,
		PHY_0X5306_HS_TX_6_PROGSEQSYMB10_REG_SHIFT,
		PHY_0X5306_HS_TX_6_PROGSEQSYMB10_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5506_CORE_DIG_CLANE_2_RW_HS_TX_6, 0,
		PHY_0X5506_HS_TX_6_PROGSEQSYMB10_REG_SHIFT,
		PHY_0X5506_HS_TX_6_PROGSEQSYMB10_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5106_CORE_DIG_CLANE_0_RW_HS_TX_6, 0,
		PHY_0X5106_HS_TX_6_PROGSEQSYMB11_REG_SHIFT,
		PHY_0X5106_HS_TX_6_PROGSEQSYMB11_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5306_CORE_DIG_CLANE_1_RW_HS_TX_6, 0,
		PHY_0X5306_HS_TX_6_PROGSEQSYMB11_REG_SHIFT,
		PHY_0X5306_HS_TX_6_PROGSEQSYMB11_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5506_CORE_DIG_CLANE_2_RW_HS_TX_6, 0,
		PHY_0X5506_HS_TX_6_PROGSEQSYMB11_REG_SHIFT,
		PHY_0X5506_HS_TX_6_PROGSEQSYMB11_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5106_CORE_DIG_CLANE_0_RW_HS_TX_6, 0,
		PHY_0X5106_HS_TX_6_PROGSEQSYMB12_REG_SHIFT,
		PHY_0X5106_HS_TX_6_PROGSEQSYMB12_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5306_CORE_DIG_CLANE_1_RW_HS_TX_6, 0,
		PHY_0X5306_HS_TX_6_PROGSEQSYMB12_REG_SHIFT,
		PHY_0X5306_HS_TX_6_PROGSEQSYMB12_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5506_CORE_DIG_CLANE_2_RW_HS_TX_6, 0,
		PHY_0X5506_HS_TX_6_PROGSEQSYMB12_REG_SHIFT,
		PHY_0X5506_HS_TX_6_PROGSEQSYMB12_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5106_CORE_DIG_CLANE_0_RW_HS_TX_6, 0,
		PHY_0X5106_HS_TX_6_PROGSEQSYMB13_REG_SHIFT,
		PHY_0X5106_HS_TX_6_PROGSEQSYMB13_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5306_CORE_DIG_CLANE_1_RW_HS_TX_6, 0,
		PHY_0X5306_HS_TX_6_PROGSEQSYMB13_REG_SHIFT,
		PHY_0X5306_HS_TX_6_PROGSEQSYMB13_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5506_CORE_DIG_CLANE_2_RW_HS_TX_6, 0,
		PHY_0X5506_HS_TX_6_PROGSEQSYMB13_REG_SHIFT,
		PHY_0X5506_HS_TX_6_PROGSEQSYMB13_REG_MASK, DIRECT_WRITE);
}

static void dsi_hw_phy_tx_extra_cfg(struct dpu_hw_blk *hw)
{
	u16 value;

	value = DPU_REG_READ(hw,
		PHY_0X1427_CORE_DIG_IOCTRL_RW_AFE_LANE2_CTRL_2_7);
	value = MERGE_MASK_BITS(value, 1,
		PHY_0X1427_OA_LANE2_LPRX_LP_PON_OVR_EN_SHIFT,
		PHY_0X1427_OA_LANE2_LPRX_LP_PON_OVR_EN_MASK);
	value = MERGE_MASK_BITS(value, 1,
		PHY_0X1427_OA_LANE2_LPRX_CD_PON_OVR_EN_SHIFT,
		PHY_0X1427_OA_LANE2_LPRX_CD_PON_OVR_EN_MASK);
	DPU_REG_WRITE(hw,
		PHY_0X1427_CORE_DIG_IOCTRL_RW_AFE_LANE2_CTRL_2_7, value, DIRECT_WRITE);

	value = DPU_REG_READ(hw,
		PHY_0X1428_CORE_DIG_IOCTRL_RW_AFE_LANE2_CTRL_2_8);
	value = MERGE_MASK_BITS(value, 0,
		PHY_0X1428_OA_LANE2_LPRX_LP_PON_OVR_VAL_SHIFT,
		PHY_0X1428_OA_LANE2_LPRX_LP_PON_OVR_VAL_MASK);
	value = MERGE_MASK_BITS(value, 0,
		PHY_0X1428_OA_LANE2_LPRX_CD_PON_OVR_VAL_SHIFT,
		PHY_0X1428_OA_LANE2_LPRX_CD_PON_OVR_VAL_MASK);
	DPU_REG_WRITE(hw,
		PHY_0X1428_CORE_DIG_IOCTRL_RW_AFE_LANE2_CTRL_2_8, value, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X1C21_CORE_DIG_IOCTRL_RW_AFE_CB_CTRL_2_1, 0,
		PHY_0X1C21_OA_CB_HSTXLB_DCO_CLK0_EN_OVR_VAL_SHIFT,
		PHY_0X1C21_OA_CB_HSTXLB_DCO_CLK0_EN_OVR_VAL_MASK, DIRECT_WRITE);

	value = DPU_REG_READ(hw, PHY_0X1C23_CORE_DIG_IOCTRL_RW_AFE_CB_CTRL_2_3);
	value = MERGE_MASK_BITS(value, 1,
		PHY_0X1C23_OA_CB_HSTXLB_DCO_CLK0_EN_OVR_EN_SHIFT,
		PHY_0X1C23_OA_CB_HSTXLB_DCO_CLK0_EN_OVR_EN_MASK);
	value = MERGE_MASK_BITS(value, 1,
		PHY_0X1C23_OA_CB_HSTXLB_DCO_CLK90_EN_OVR_EN_SHIFT,
		PHY_0X1C23_OA_CB_HSTXLB_DCO_CLK90_EN_OVR_EN_MASK);
	DPU_REG_WRITE(hw,
		PHY_0X1C23_CORE_DIG_IOCTRL_RW_AFE_CB_CTRL_2_3, value, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X1C20_CORE_DIG_IOCTRL_RW_AFE_CB_CTRL_2_0, 0,
		PHY_0X1C20_OA_CB_HSTXLB_DCO_CLK90_EN_OVR_VAL_SHIFT,
		PHY_0X1C20_OA_CB_HSTXLB_DCO_CLK90_EN_OVR_VAL_MASK, DIRECT_WRITE);

	value = DPU_REG_READ(hw, PHY_0X1C27_CORE_DIG_IOCTRL_RW_AFE_CB_CTRL_2_7);
	value = MERGE_MASK_BITS(value, 0,
		PHY_0X1C27_OA_CB_HSTXLB_DCO_EN_OVR_VAL_SHIFT,
		PHY_0X1C27_OA_CB_HSTXLB_DCO_EN_OVR_VAL_MASK);
	value = MERGE_MASK_BITS(value, 0,
		PHY_0X1C27_OA_CB_HSTXLB_DCO_TUNE_CLKDIG_EN_OVR_VAL_SHIFT,
		PHY_0X1C27_OA_CB_HSTXLB_DCO_TUNE_CLKDIG_EN_OVR_VAL_MASK);
	DPU_REG_WRITE(hw,
		PHY_0X1C27_CORE_DIG_IOCTRL_RW_AFE_CB_CTRL_2_7, value, DIRECT_WRITE);

	value = DPU_REG_READ(hw, PHY_0X1C26_CORE_DIG_IOCTRL_RW_AFE_CB_CTRL_2_6);
	value = MERGE_MASK_BITS(value, 1,
		PHY_0X1C26_OA_CB_HSTXLB_DCO_EN_OVR_EN_SHIFT,
		PHY_0X1C26_OA_CB_HSTXLB_DCO_EN_OVR_EN_MASK);
	value = MERGE_MASK_BITS(value, 1,
		PHY_0X1C26_OA_CB_HSTXLB_DCO_TUNE_CLKDIG_EN_OVR_EN_SHIFT,
		PHY_0X1C26_OA_CB_HSTXLB_DCO_TUNE_CLKDIG_EN_OVR_EN_MASK);
	value = MERGE_MASK_BITS(value, 1,
		PHY_0X1C26_OA_CB_HSTXLB_DCO_PON_OVR_EN_SHIFT,
		PHY_0X1C26_OA_CB_HSTXLB_DCO_PON_OVR_EN_MASK);
	DPU_REG_WRITE(hw,
		PHY_0X1C26_CORE_DIG_IOCTRL_RW_AFE_CB_CTRL_2_6, value, DIRECT_WRITE);

	value = DPU_REG_READ(hw, PHY_0X1C25_CORE_DIG_IOCTRL_RW_AFE_CB_CTRL_2_5);
	value = MERGE_MASK_BITS(value, 0,
		PHY_0X1C25_OA_CB_SEL_45OHM_50OHM_SHIFT,
		PHY_0X1C25_OA_CB_SEL_45OHM_50OHM_MASK);
	value = MERGE_MASK_BITS(value, 1,
		PHY_0X1C25_OA_CB_CAL_SINK_EN_OVR_EN_SHIFT,
		PHY_0X1C25_OA_CB_CAL_SINK_EN_OVR_EN_MASK);
	DPU_REG_WRITE(hw,
		PHY_0X1C25_CORE_DIG_IOCTRL_RW_AFE_CB_CTRL_2_5, value, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X1C24_CORE_DIG_IOCTRL_RW_AFE_CB_CTRL_2_4, 0,
		PHY_0X1C24_OA_CB_CAL_SINK_EN_OVR_VAL_SHIFT,
		PHY_0X1C24_OA_CB_CAL_SINK_EN_OVR_VAL_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3040_CORE_DIG_DLANE_0_RW_LP_0, 2,
		PHY_0X3040_LP_0_ITMINRX_REG_SHIFT,
		PHY_0X3040_LP_0_ITMINRX_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3240_CORE_DIG_DLANE_1_RW_LP_0, 1,
		PHY_0X3240_LP_0_ITMINRX_REG_SHIFT,
		PHY_0X3240_LP_0_ITMINRX_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3440_CORE_DIG_DLANE_2_RW_LP_0, 1,
		PHY_0X3440_LP_0_ITMINRX_REG_SHIFT,
		PHY_0X3440_LP_0_ITMINRX_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X3640_CORE_DIG_DLANE_3_RW_LP_0, 1,
		PHY_0X3640_LP_0_ITMINRX_REG_SHIFT,
		PHY_0X3640_LP_0_ITMINRX_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5040_CORE_DIG_CLANE_0_RW_LP_0, 1,
		PHY_0X5040_LP_0_ITMINRX_REG_SHIFT,
		PHY_0X5040_LP_0_ITMINRX_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5240_CORE_DIG_CLANE_1_RW_LP_0, 1,
		PHY_0X5240_LP_0_ITMINRX_REG_SHIFT,
		PHY_0X5240_LP_0_ITMINRX_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X5440_CORE_DIG_CLANE_2_RW_LP_0, 1,
		PHY_0X5440_LP_0_ITMINRX_REG_SHIFT,
		PHY_0X5440_LP_0_ITMINRX_REG_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X0C10_PPI_STARTUP_RW_COMMON_DPHY_10, 48,
		PHY_0X0C10_COMMON_DPHY_10_PHY_READY_ADDR_SHIFT,
		PHY_0X0C10_COMMON_DPHY_10_PHY_READY_ADDR_MASK, DIRECT_WRITE);

	value = DPU_REG_READ(hw,
		PHY_0X1CF2_CORE_DIG_ANACTRL_RW_COMMON_ANACTRL_2);
	value = MERGE_MASK_BITS(value, 1,
		PHY_0X1CF2_ANACTRL_2_GLOBAL_ULPS_OVR_EN_SHIFT,
		PHY_0X1CF2_ANACTRL_2_GLOBAL_ULPS_OVR_EN_MASK);
	value = MERGE_MASK_BITS(value, 0,
		PHY_0X1CF2_ANACTRL_2_GLOBAL_ULPS_OVR_VAL_SHIFT,
		PHY_0X1CF2_ANACTRL_2_GLOBAL_ULPS_OVR_VAL_MASK);
	DPU_REG_WRITE(hw,
		PHY_0X1CF2_CORE_DIG_ANACTRL_RW_COMMON_ANACTRL_2, value, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X1C41_CORE_DIG_RW_COMMON_1, 2,
		PHY_0X1C41_COMMON_1_OCLA_DATA_SEL_SHIFT,
		PHY_0X1C41_COMMON_1_OCLA_DATA_SEL_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X1C43_CORE_DIG_RW_COMMON_3, 2,
		PHY_0X1C43_COMMON_3_OCLA_CLK_SEL_SHIFT,
		PHY_0X1C43_COMMON_3_OCLA_CLK_SEL_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw,
		PHY_0X1203_CORE_DIG_IOCTRL_RW_DPHY_PPI_LANE1_OVR_0_3, 0,
		PHY_0X1203_LANE1_I_TXREQUESTESC_D1_OVR_VAL_SHIFT,
		PHY_0X1203_LANE1_I_TXREQUESTESC_D1_OVR_VAL_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw,
		PHY_0X1204_CORE_DIG_IOCTRL_RW_DPHY_PPI_LANE1_OVR_0_4, 0,
		PHY_0X1204_LANE1_I_TXREQUESTESC_D1_OVR_EN_SHIFT,
		PHY_0X1204_LANE1_I_TXREQUESTESC_D1_OVR_EN_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw,
		PHY_0X1403_CORE_DIG_IOCTRL_RW_DPHY_PPI_LANE2_OVR_0_3, 0,
		PHY_0X1403_LANE2_I_TXREQUESTESC_D2_OVR_VAL_SHIFT,
		PHY_0X1403_LANE2_I_TXREQUESTESC_D2_OVR_VAL_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw,
		PHY_0X1404_CORE_DIG_IOCTRL_RW_DPHY_PPI_LANE2_OVR_0_4, 0,
		PHY_0X1404_LANE2_I_TXREQUESTESC_D2_OVR_EN_SHIFT,
		PHY_0X1404_LANE2_I_TXREQUESTESC_D2_OVR_EN_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw,
		PHY_0X1603_CORE_DIG_IOCTRL_RW_DPHY_PPI_LANE3_OVR_0_3, 0,
		PHY_0X1603_LANE3_I_TXREQUESTESC_D2_OVR_VAL_SHIFT,
		PHY_0X1603_LANE3_I_TXREQUESTESC_D2_OVR_VAL_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw,
		PHY_0X1604_CORE_DIG_IOCTRL_RW_DPHY_PPI_LANE3_OVR_0_4, 0,
		PHY_0X1604_LANE3_I_TXREQUESTESC_D2_OVR_EN_SHIFT,
		PHY_0X1604_LANE3_I_TXREQUESTESC_D2_OVR_EN_MASK, DIRECT_WRITE);
}

static void dsi_hw_phy_tx_common_cfg(struct dpu_hw_blk *hw)
{
	u16 value;

	DSI_DEBUG("dsi_hw_phy_tx_common_cfg start !!!!\n");

	/* only for snps cdphy fpga board */
	/* Step-4: WA rst_n : 0x8083=0x0002, 0x8083=0x0003 */
	DPU_REG_WRITE(hw, PHY_SREG_RST_N, 0x0002, DIRECT_WRITE);
	DPU_USLEEP(1);
	DPU_REG_WRITE(hw, PHY_SREG_RST_N, 0x0003, DIRECT_WRITE);
	DPU_REG_WRITE(hw, PHY_SREG_SET_N, 0x0003, DIRECT_WRITE);

	DPU_REG_WRITE(hw,
		PHY_0X7000_TC_DIG_TC_REGISTERS_RW_CORE_CTRL_0, 0x0FF0, DIRECT_WRITE);
	DPU_USLEEP(1);
	DPU_REG_WRITE(hw,
		PHY_0X7000_TC_DIG_TC_REGISTERS_RW_CORE_CTRL_0, 0x0FF2, DIRECT_WRITE);

	DPU_REG_WRITE(hw,
		PHY_0X7003_TC_DIG_TC_REGISTERS_RW_CORE_CTRL_2, 0x3333, DIRECT_WRITE);
	DPU_REG_WRITE(hw,
		PHY_0X7005_TC_DIG_TC_REGISTERS_RW_CORE_CTRL_3, 0x0002, DIRECT_WRITE);
	DPU_REG_WRITE(hw,
		PHY_0X7200_TC_DIG_TC_REGISTERS_RW_TC_CTRL_0, 0x00A1, DIRECT_WRITE);
	DPU_REG_WRITE(hw,
		PHY_0X7201_TC_DIG_TC_REGISTERS_RW_TC_CTRL_1, 0x0000, DIRECT_WRITE);
	DPU_REG_WRITE(hw,
		PHY_0X0E34_PPI_RW_HSTX_FIFO_CFG, 0x0006, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X1CF0_CORE_DIG_ANACTRL_RW_COMMON_ANACTRL_0,
		63,
		PHY_0X1CF0_ANACTRL_0_CB_LP_DCO_EN_DLY_SHIFT,
		PHY_0X1CF0_ANACTRL_0_CB_LP_DCO_EN_DLY_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X0C11_PPI_STARTUP_RW_COMMON_STARTUP_1_1, 563,
		PHY_0X0C11_COMMON_STARTUP_1_1_PHY_READY_DLY_SHIFT,
		PHY_0X0C11_COMMON_STARTUP_1_1_PHY_READY_DLY_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X0C02_PPI_STARTUP_RW_COMMON_DPHY_2, 3,
		PHY_0X0C02_COMMON_DPHY_2_RCAL_ADDR_SHIFT,
		PHY_0X0C02_COMMON_DPHY_2_RCAL_ADDR_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X0C03_PPI_STARTUP_RW_COMMON_DPHY_3, 38,
		PHY_0X0C03_COMMON_DPHY_3_PLL_START_ADDR_SHIFT,
		PHY_0X0C03_COMMON_DPHY_3_PLL_START_ADDR_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X0C06_PPI_STARTUP_RW_COMMON_DPHY_6, 16,
		PHY_0X0C06_COMMON_DPHY_6_LP_DCO_CAL_ADDR_SHIFT,
		PHY_0X0C06_COMMON_DPHY_6_LP_DCO_CAL_ADDR_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X0C0A_PPI_STARTUP_RW_COMMON_DPHY_A, 33,
		PHY_0X0C0A_COMMON_DPHY_A_HIBERNATE_ADDR_SHIFT,
		PHY_0X0C0A_COMMON_DPHY_A_HIBERNATE_ADDR_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X1CF2_CORE_DIG_ANACTRL_RW_COMMON_ANACTRL_2,
		1,
		PHY_0X1CF2_ANACTRL_2_GLOBAL_ULPS_OVR_EN_SHIFT,
		PHY_0X1CF2_ANACTRL_2_GLOBAL_ULPS_OVR_EN_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X0C26_PPI_CALIBCTRL_RW_COMMON_BG_0, 500,
		PHY_0X0C26_COMMON_BG_0_BG_MAX_COUNTER_SHIFT,
		PHY_0X0C26_COMMON_BG_0_BG_MAX_COUNTER_MASK, DIRECT_WRITE);
	/* 38: for cfg_clk:38.4MHz 19: for cfg_clk:20MHz */
	DPU_BITMASK_WRITE(hw, PHY_0X0E40_PPI_RW_TERMCAL_CFG_0, 19,
		PHY_0X0E40_TERMCAL_CFG_0_TERMCAL_TIMER_SHIFT,
		PHY_0X0E40_TERMCAL_CFG_0_TERMCAL_TIMER_SHIFT, DIRECT_WRITE);
	/* 153: for cfg_clk:38.4MHz 79: for cfg_clk:80MHz */
	DPU_REG_WRITE(hw, PHY_0X0E01_PPI_RW_LPDCOCAL_TIMEBASE, 79, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X0E02_PPI_RW_LPDCOCAL_NREF, 800,
		PHY_0X0E02_NREF_LPCDCOCAL_NREF_SHIFT,
		PHY_0X0E02_NREF_LPCDCOCAL_NREF_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X0E03_PPI_RW_LPDCOCAL_NREF_RANGE, 15,
		PHY_0X0E03_NREF_RANGE_LPCDCOCAL_NREF_RANGE_SHIFT,
		PHY_0X0E03_NREF_RANGE_LPCDCOCAL_NREF_RANGE_MASK, DIRECT_WRITE);

	value = DPU_REG_READ(hw, PHY_0X0E05_PPI_RW_LPDCOCAL_TWAIT_CONFIG);
	value = MERGE_MASK_BITS(value, 127,
		PHY_0X0E05_TWAIT_CONFIG_LPCDCOCAL_TWAIT_PON_SHIFT,
		PHY_0X0E05_TWAIT_CONFIG_LPCDCOCAL_TWAIT_PON_MASK);
	/* (ASIC)47:38.4MHz, (FPGA)24:20MHz */
	value = MERGE_MASK_BITS(value, 24,
		PHY_0X0E05_TWAIT_CONFIG_LPCDCOCAL_TWAIT_COARSE_SHIFT,
		PHY_0X0E05_TWAIT_CONFIG_LPCDCOCAL_TWAIT_COARSE_MASK);
	DPU_REG_WRITE(hw, PHY_0X0E05_PPI_RW_LPDCOCAL_TWAIT_CONFIG, value, DIRECT_WRITE);

	value = DPU_REG_READ(hw, PHY_0X0E06_PPI_RW_LPDCOCAL_VT_CONFIG);
	/* (ASIC)47:38.4MHz, (FPGA)24:20MHz */
	value = MERGE_MASK_BITS(value, 24,
		PHY_0X0E06_VT_CONFIG_LPCDCOCAL_TWAIT_FINE_SHIFT,
		PHY_0X0E06_VT_CONFIG_LPCDCOCAL_TWAIT_FINE_MASK);
	value = MERGE_MASK_BITS(value, 15,
		PHY_0X0E06_VT_CONFIG_LPCDCOCAL_VT_NREF_RANGE_SHIFT,
		PHY_0X0E06_VT_CONFIG_LPCDCOCAL_VT_NREF_RANGE_MASK);
	value = MERGE_MASK_BITS(value, 0,
		PHY_0X0E06_VT_CONFIG_LPCDCOCAL_USE_IDEAL_NREF_SHIFT,
		PHY_0X0E06_VT_CONFIG_LPCDCOCAL_USE_IDEAL_NREF_MASK);
	value = MERGE_MASK_BITS(value, 0,
		PHY_0X0E06_VT_CONFIG_LPCDCOCAL_VT_TRACKING_EN_SHIFT,
		PHY_0X0E06_VT_CONFIG_LPCDCOCAL_VT_TRACKING_EN_MASK);
	DPU_REG_WRITE(hw, PHY_0X0E06_PPI_RW_LPDCOCAL_VT_CONFIG, value, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X0E08_PPI_RW_LPDCOCAL_COARSE_CFG, 1,
		PHY_0X0E08_LPDCOCAL_COARSE_CFG_NCOARSE_START_SHIFT,
		PHY_0X0E08_LPDCOCAL_COARSE_CFG_NCOARSE_START_MASK, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X1C22_CORE_DIG_IOCTRL_RW_AFE_CB_CTRL_2_2, 1,
		PHY_0X1C22_OA_CB_PLL_BUSTIEZ_SHIFT,
		PHY_0X1C22_OA_CB_PLL_BUSTIEZ_MASK, DIRECT_WRITE);

	/* (ASIC)383:38.4MHz, (FPGA)199:20MHz */
	DPU_REG_WRITE(hw, PHY_0X0E60_PPI_RW_PLL_STARTUP_CFG_0, 199, DIRECT_WRITE);
	/* (ASIC)191:38.4MHz, (FPGA)99:20MHz */
	DPU_REG_WRITE(hw, PHY_0X0E61_PPI_RW_PLL_STARTUP_CFG_1, 99, DIRECT_WRITE);

	DPU_REG_WRITE(hw, PHY_0X0E62_PPI_RW_PLL_STARTUP_CFG_2, 0, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw, PHY_0X1C26_CORE_DIG_IOCTRL_RW_AFE_CB_CTRL_2_6, 1,
		PHY_0X1C26_OA_CB_HSTXLB_DCO_PON_OVR_EN_SHIFT,
		PHY_0X1C26_OA_CB_HSTXLB_DCO_PON_OVR_EN_MASK, DIRECT_WRITE);

	//DPU_BITMASK_WRITE(hw, PHY_0X0E36_PPI_RW_COMMON_CFG, 3,
	//	PHY_0X0E36_CFG_CLK_DIV_FACTOR_SHIFT,
	//	PHY_0X0E36_CFG_CLK_DIV_FACTOR_MASK, DIRECT_WRITE);

	/* CFG_CLK_DIV_FACTOR */
	DPU_REG_WRITE(hw, PHY_0X0E36_PPI_RW_COMMON_CFG, 3, DIRECT_WRITE);
}

static void dsi_hw_phy_is_ready(struct dpu_hw_blk *hw)
{
	u16 value;
	int ret;

	/* wait phy_ready state, read 0x1c0c == 0x0010 */
	ret = DPU_READ_POLL_TIMEOUT(hw,
		PHY_0X1C0C_CORE_DIG_IOCTRL_R_COMMON_PPI_OVR_0_12, value,
		!(value & CDPHY_IS_READY), 100, 25000);
	if (ret < 0)
		DSI_ERROR("wait phy ready timeout!, val: %d, ret: %d\n", value, ret);
}

int dsi_hw_phy_pll_config_fpga(struct dpu_hw_blk *hw,
		struct dsi_phy_cfg *cfg)
{
	int loop_div, m_dec, m_int, div_tmp;
	u8 size, range, int_cntrl;
	u32 mpll_frac_quot;
	u64 fout;
	u16 pll_m;
	u16 value = 0;

	/* M */
	loop_div = 0;
	/* M quot */
	m_dec = 0;
	/* M fran */
	m_int = 0;

	if (cfg->phy_hs_speed < PHY_OUTPUT_RATE_MIN) {
		DSI_ERROR("Speed too low %d\n", cfg->phy_hs_speed);
		return -1;
	} else if (cfg->phy_hs_speed > PHY_OUTPUT_RATE_MAX) {
		DSI_ERROR("Speed too low %d\n", cfg->phy_hs_speed);
		return -1;
	}

	/* lane output clk, lane_rate /2 */
	fout = cfg->phy_hs_speed / PHY_CLOCK_DIV;

	/* fout < 356 Mhz */
	if (fout < 356000000)
		int_cntrl = 1;
	else
		int_cntrl = 0;

	/* find fout range */
	size = ARRAY_SIZE(freq_range);

	DSI_INFO("size = %u, fout = %llu, fout / 1000 = %llu\n",
		 size, fout, fout / 1000);
	/* TODO fout / 1000 */
	for (range = 0;
		(range < size) && ((fout / 1000) > freq_range[range].freq);
		range++) {
	}

	if (range >= size) {
		DSI_ERROR("input speed does not support!!\n");
		return -1;
	}

	DSI_INFO("freq_range[%u].freq = %ul\n", range, freq_range[range].freq);

	loop_div = fout * freq_range[range].p * PHY_INPUT_DIV_N /
		(PHY_INPUT_FREQ / PHY_QUOT_GEN);

	div_tmp = loop_div / PHY_QUOT_GEN * PHY_QUOT_GEN;
	m_int = loop_div;

	if ((loop_div - div_tmp) >= (PHY_QUOT_GEN / 2)) {
		m_int = loop_div / PHY_QUOT_GEN + 1;
		/* m_dec >0.5 ,neet to -0.5*/
		m_dec = (loop_div - div_tmp) - (PHY_QUOT_GEN / 2);
	} else {
		m_int = m_int / PHY_QUOT_GEN;
		/* m_dec >0.5 ,neet to -0.5*/
		m_dec = loop_div - div_tmp;
	}

	/* from SNPS */
	pll_m = m_int * 4;
	/* mpll_mint = pll_m; */
	mpll_frac_quot = m_dec * (PHY_MPLL_COE / PHY_MPLL_COE_DIV) /
		(PHY_QUOT_GEN / PHY_MPLL_COE_DIV);

	/* PLL configuration condering a clock input reference of 100MHz */
	DPU_REG_WRITE(hw, PHY_0X7111_TC_DIG_TC_REGISTERS_RW_PLL_ANA_CTRL_4,
		phy_pll_static.mpll_prg_r1, DIRECT_WRITE);

	DPU_REG_WRITE(hw, PHY_0X7112_TC_DIG_TC_REGISTERS_RW_PLL_ANA_CTRL_5,
		phy_pll_static.mpll_prg_r0, DIRECT_WRITE);

	DPU_REG_WRITE(hw, PHY_0X7114_TC_DIG_TC_REGISTERS_RW_PLL_ANA_CTRL_7,
		phy_pll_static.th1_r, DIRECT_WRITE);

	DPU_REG_WRITE(hw, PHY_0X7115_TC_DIG_TC_REGISTERS_RW_PLL_ANA_CTRL_8,
		phy_pll_static.th2_r, DIRECT_WRITE);

	DPU_REG_WRITE(hw, PHY_0X7116_TC_DIG_TC_REGISTERS_RW_PLL_ANA_CTRL_9,
		phy_pll_static.th3_r, DIRECT_WRITE);

	value = DPU_REG_READ(hw,
		PHY_0X711A_TC_DIG_TC_REGISTERS_RW_PLL_ANA_CTRL_11);
	value = MERGE_MASK_BITS(value, pll_m,
		PHY_0X711A_PLL_ANA_CTRL_11_PHY_M_R_SHIFT,
		PHY_0X711A_PLL_ANA_CTRL_11_PHY_M_R_MASK);
	value = MERGE_MASK_BITS(value, (PHY_INPUT_DIV_N - 1),
		PHY_0X711A_PLL_ANA_CTRL_11_PHY_N_R_SHIFT,
		PHY_0X711A_PLL_ANA_CTRL_11_PHY_N_R_MASK);
	DPU_REG_WRITE(hw,
		PHY_0X711A_TC_DIG_TC_REGISTERS_RW_PLL_ANA_CTRL_11, value, DIRECT_WRITE);

	DPU_BITMASK_WRITE(hw,
		PHY_0X7117_TC_DIG_TC_REGISTERS_RW_PLL_ANA_CTRL_10,
		freq_range[range].vco_cntrl,
		PHY_0X7117_PLL_ANA_CTRL_10_VCO_CNTRL_R_SHIFT,
		PHY_0X7117_PLL_ANA_CTRL_10_VCO_CNTRL_R_MASK, DIRECT_WRITE);

	value = DPU_REG_READ(hw,
		PHY_0X710E_TC_DIG_TC_REGISTERS_RW_PLL_ANA_CTRL_1);
	value = MERGE_MASK_BITS(value, int_cntrl,
		PHY_0X710E_PLL_ANA_CTRL_1_INT_CNTRL_R_SHIFT,
		PHY_0X710E_PLL_ANA_CTRL_1_INT_CNTRL_R_MASK);
	value = MERGE_MASK_BITS(value, phy_pll_static.gmp_cntrl_r,
		PHY_0X710E_PLL_ANA_CTRL_1_GMP_CNTRL_R_SHIFT,
		PHY_0X710E_PLL_ANA_CTRL_1_GMP_CNTRL_R_MASK);
	value = MERGE_MASK_BITS(value, phy_pll_static.mpll_opmode_r,
		PHY_0X710E_PLL_ANA_CTRL_1_MPLL_OPMODE_R_SHIFT,
		PHY_0X710E_PLL_ANA_CTRL_1_MPLL_OPMODE_R_MASK);
	DPU_REG_WRITE(hw,
		PHY_0X710E_TC_DIG_TC_REGISTERS_RW_PLL_ANA_CTRL_1, value, DIRECT_WRITE);

	DPU_REG_WRITE(hw, PHY_0X7113_TC_DIG_TC_REGISTERS_RW_PLL_ANA_CTRL_6,
		phy_pll_static.prop_cntrl_r, DIRECT_WRITE);

	DPU_REG_WRITE(hw, PHY_0X710A_TC_DIG_TC_REGISTERS_RW_PLL_SSC_CTRL_6,
		mpll_frac_quot, DIRECT_WRITE);

	DPU_REG_WRITE(hw, PHY_0X710B_TC_DIG_TC_REGISTERS_RW_PLL_SSC_CTRL_7,
		phy_pll_static.mpll_frac_rem_r, DIRECT_WRITE);

	DPU_REG_WRITE(hw, PHY_0X710C_TC_DIG_TC_REGISTERS_RW_PLL_SSC_CTRL_8,
		phy_pll_static.mpll_frac_den_r, DIRECT_WRITE);

	value = DPU_REG_READ(hw,
		PHY_0X7104_TC_DIG_TC_REGISTERS_RW_PLL_SSC_CTRL_0);
	value = MERGE_MASK_BITS(value, phy_pll_static.mpll_fracn_en_r,
		PHY_0X7104_PLL_SSC_CTRL_0_MPLL_FRACN_EN_R_SHIFT,
		PHY_0X7104_PLL_SSC_CTRL_0_MPLL_FRACN_EN_R_MASK);
	value = MERGE_MASK_BITS(value, phy_pll_static.mpll_ssc_en_r,
		PHY_0X7104_PLL_SSC_CTRL_0_MPLL_SSC_EN_R_SHIFT,
		PHY_0X7104_PLL_SSC_CTRL_0_MPLL_SSC_EN_R_MASK);
	value = MERGE_MASK_BITS(value,
		phy_pll_static.mpll_fracn_cfg_update_en_r,
		PHY_0X7104_PLL_SSC_CTRL_0_MPLL_FRACN_CFG_UPDATE_EN_R_SHIFT,
		PHY_0X7104_PLL_SSC_CTRL_0_MPLL_FRACN_CFG_UPDATE_EN_R_MASK);
	DPU_REG_WRITE(hw,
		PHY_0X7104_TC_DIG_TC_REGISTERS_RW_PLL_SSC_CTRL_0, value, DIRECT_WRITE);

	value = DPU_REG_READ(hw,
		PHY_0X7100_TC_DIG_TC_REGISTERS_RW_PLL_STR_CTRL_0);
	value = MERGE_MASK_BITS(value, phy_pll_static.onpll_r,
		PHY_0X7100_PLL_STR_CTRL_0_ONPLL_R_SHIFT,
		PHY_0X7100_PLL_STR_CTRL_0_ONPLL_R_MASK);
	value = MERGE_MASK_BITS(value, 0xC7,
		PHY_0X7100_PLL_STR_CTRL_0_PLL_RST_TIME_R_SHIFT,
		PHY_0X7100_PLL_STR_CTRL_0_PLL_RST_TIME_R_MASK);
	DPU_REG_WRITE(hw,
		PHY_0X7100_TC_DIG_TC_REGISTERS_RW_PLL_STR_CTRL_0, value, DIRECT_WRITE);

	value = DPU_REG_READ(hw,
		PHY_0X711B_TC_DIG_TC_REGISTERS_RW_PLL_ANA_CTRL_12);
	value = MERGE_MASK_BITS(value, phy_pll_static.pll_shadow_control_r,
		PHY_0X711B_PLL_ANA_CTRL_12_PLL_SHADOW_CONTROL_R_SHIFT,
		PHY_0X711B_PLL_ANA_CTRL_12_PLL_SHADOW_CONTROL_R_MASK);
	value = MERGE_MASK_BITS(value, phy_pll_static.shadow_clear_r0,
		PHY_0X711B_PLL_ANA_CTRL_12_SHADOW_CLEAR_R_SHIFT,
		PHY_0X711B_PLL_ANA_CTRL_12_SHADOW_CLEAR_R_MASK);
	value = MERGE_MASK_BITS(value, phy_pll_static.updatepll_r0,
		PHY_0X711B_PLL_ANA_CTRL_12_UPDATEPLL_R_SHIFT,
		PHY_0X711B_PLL_ANA_CTRL_12_UPDATEPLL_R_MASK);
	value = MERGE_MASK_BITS(value, 0,
		PHY_0X711B_PLL_ANA_CTRL_12_GP_CLK_CNTRL_R_SHIFT,
		PHY_0X711B_PLL_ANA_CTRL_12_GP_CLK_CNTRL_R_MASK);
	DPU_REG_WRITE(hw,
		PHY_0X711B_TC_DIG_TC_REGISTERS_RW_PLL_ANA_CTRL_12, value, DIRECT_WRITE);

	DPU_USLEEP(10);
	/* waite phy_ready state: is ready */
	dsi_hw_phy_is_ready(hw);

	/* PLL output enable */
	value = DPU_REG_READ(hw,
		PHY_0X710D_TC_DIG_TC_REGISTERS_RW_PLL_ANA_CTRL_0);
	value = MERGE_MASK_BITS(value, 1,
		PHY_0X710D_PLL_ANA_CTRL_0_CLKSEL_R_SHIFT,
		PHY_0X710D_PLL_ANA_CTRL_0_CLKSEL_R_MASK);
	value = MERGE_MASK_BITS(value, phy_pll_static.atb_sense_sel_r,
		PHY_0X710D_PLL_ANA_CTRL_0_ATB_SENSE_SEL_R_SHIFT,
		PHY_0X710D_PLL_ANA_CTRL_0_ATB_SENSE_SEL_R_MASK);
	value = MERGE_MASK_BITS(value, 1,
		PHY_0X710D_PLL_ANA_CTRL_0_CLKSEL_EN_R_SHIFT,
		PHY_0X710D_PLL_ANA_CTRL_0_CLKSEL_EN_R_MASK);
	value = MERGE_MASK_BITS(value, phy_pll_static.en_ssc_frac_r,
		PHY_0X710D_PLL_ANA_CTRL_0_EN_SSC_FRAC_R_SHIFT,
		PHY_0X710D_PLL_ANA_CTRL_0_EN_SSC_FRAC_R_MASK);
	value = MERGE_MASK_BITS(value, freq_range[range].cpibas_cntrl,
		PHY_0X710D_PLL_ANA_CTRL_0_CPBIAS_CNTRL_R_SHIFT,
		PHY_0X710D_PLL_ANA_CTRL_0_CPBIAS_CNTRL_R_MASK);
	DPU_REG_WRITE(hw,
		PHY_0X710D_TC_DIG_TC_REGISTERS_RW_PLL_ANA_CTRL_0, value, DIRECT_WRITE);
	return 0;
}

int dsi_hw_phy_wait_ready_fpga(struct dpu_hw_blk *hw, struct dsi_phy_cfg *cfg)
{
	u32 value = 0;
	int ret = 0;
	int time;

	/* wait phy ready */
	time = DPU_READ_POLL_TIMEOUT(hw,
		PHY_0X1C0C_CORE_DIG_IOCTRL_R_COMMON_PPI_OVR_0_12,
		value, (value == 0x10), 1000, 25000);
	if (time < 0) {
		DSI_ERROR("waite phy ready timeout! val:0x%x\n", value);
		ret = -1;
	}

	DPU_REG_WRITE(hw,
		PHY_0X710D_TC_DIG_TC_REGISTERS_RW_PLL_ANA_CTRL_0, 0xC80, DIRECT_WRITE);
	DPU_BITMASK_WRITE(hw,
		PHY_0X7100_TC_DIG_TC_REGISTERS_RW_PLL_STR_CTRL_0, 1,
		PHY_0X7100_PLL_STR_CTRL_0_ONPLL_R_SHIFT,
		PHY_0X7100_PLL_STR_CTRL_0_ONPLL_R_MASK, DIRECT_WRITE);

	if (cfg->phy_type == DSI_PHY_TYPE_DPHY) {
		/**
		 * Step-12: De-assert FORCETXSTOPMODE_*,
		 * b-0x7003 = 0x1111, 0x7005 = 0x0000
		 * Reset forcetxstopmode_* bits only
		 */
		DPU_REG_WRITE(hw,
			PHY_0X7003_TC_DIG_TC_REGISTERS_RW_CORE_CTRL_2,
			0x1111, DIRECT_WRITE);
		DPU_REG_WRITE(hw,
			PHY_0X7005_TC_DIG_TC_REGISTERS_RW_CORE_CTRL_3,
			0x0000, DIRECT_WRITE);
	} else if (cfg->phy_type == DSI_PHY_TYPE_CPHY) {
		DPU_REG_WRITE(hw,
			PHY_0X7002_TC_DIG_TC_REGISTERS_RW_CORE_CTRL_1,
			0x0111, DIRECT_WRITE);
	}

	return ret;
}

int dsi_hw_phy_init_fpga_old(struct dpu_hw_blk *hw,
		struct dsi_phy_cfg *cfg)
{
	int ret = 0;

	if (cfg->initial_step == MIPI_INIT_STEP_1) {
		dsi_hw_phy_tx_common_cfg(hw);

		if (cfg->phy_type == DSI_PHY_TYPE_DPHY)
			dsi_hw_dphy_tx_cfg(hw, cfg->phy_hs_speed);

		else if (cfg->phy_type == DSI_PHY_TYPE_CPHY)
			dsi_hw_cphy_tx_cfg(hw, cfg->phy_hs_speed);

		dsi_hw_phy_tx_extra_cfg(hw);

		dsi_hw_phy_pll_config_fpga(hw, cfg);

		dsi_hw_phy_is_ready(hw);
	}

	if (cfg->initial_step == MIPI_INIT_STEP_2)
		ret = dsi_hw_phy_wait_ready_fpga(hw, cfg);

	return ret;
}

int dsi_hw_phy_init_fpga(struct dpu_hw_blk *hw, struct dsi_phy_cfg *cfg)
{
	DSI_INFO("Select FPGA CDPHY!\n");
	dsi_hw_phy_tx_common_cfg(hw);

	if (cfg->phy_type == DSI_PHY_TYPE_DPHY)
		dsi_hw_dphy_tx_cfg(hw, cfg->phy_hs_speed);

	else if (cfg->phy_type == DSI_PHY_TYPE_CPHY)
		dsi_hw_cphy_tx_cfg(hw, cfg->phy_hs_speed);

	dsi_hw_phy_tx_extra_cfg(hw);

	dsi_hw_phy_pll_config_fpga(hw, cfg);

	dsi_hw_phy_is_ready(hw);

	DSI_DEBUG("FPGA CDPHY init done!\n");

	return 0;
}

void dsi_hw_phy_deinit_fpga(struct dpu_hw_blk *hw, struct dsi_phy_cfg *cfg)
{
	/* TODO */
}
